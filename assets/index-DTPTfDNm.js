(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const Li=(e,t)=>{var n,r,i,s,o,u,l,a,c;return`
	<h3>Metadata</h3>
	<span class="label">Filename</span>
	<div class="data">${t}</div>
	<span class="label">Camera</span>
	<div class="data">${((n=e.Make)==null?void 0:n.value)??"Not available"} ${((r=e.Model)==null?void 0:r.value)??"Not available"}</div>
	<span class="label">Lens</span>
	<div class="data">${((i=e.LensModel)==null?void 0:i.value)??((s=e.Lens)==null?void 0:s.value)??"Not available"}</div>
	<span class="label">Exposure Time</span>
	<div class="data">${((o=e.ExposureTime)==null?void 0:o.description)+"s"}</div>
	<span class="label">Aperture</span>
	<div class="data">${((u=e.ApertureValue)==null?void 0:u.description)??"Not available"}</div>
	<span class="label">ISO</span>
	<div class="data">${((l=e.ISOSpeedRatings)==null?void 0:l.value)??"Not available"}</div>
	<span class="label">Exposure Mode</span>
	<div class="data">${((a=e.ExposureMode)==null?void 0:a.value)??"Not available"}</div>
	<span class="label">Flash</span>
	<div class="data">${((c=e.Flash)==null?void 0:c.value)??"Not available"}</div>
	`};function h(e,t,n,r,i){return`
	<div class="cell slider-cell">
	${e}
	<div>
	<span class="value slider-value">${n}</span>
	<input
	type="range"
	class="slider ${t}"
	value="${n||0}"
	min="${r}"
	max="${i}"
	disabled
	/>
	</div>
	</div>
	`}function ue(e,t,n,r){return`
	<div class="color-grading-cell">
	${e}
    <div class="color-grading-circle" style="--hue: ${n}deg; --sat: ${r}">
      <div class="value-circle"></div>
      <div class="color-circle"></div>
    </div>
    <input
    type="range"
    class="slider slider-bw"
    value="${t||0}"
    min="-100"
    max="100"
    disabled
    />
  </div>
	`}function ae(e,t){var i,s,o,u;let n="",r="";for(let l=0;l<e.length-1;l++){const a=te((i=e[l])==null?void 0:i.value),c=te((s=e[l+1])==null?void 0:s.value);if(l==0){const f=te((o=e[l+1])==null?void 0:o.value),g=[a[0]-(f[1]-c[1])/Math.PI,a[1]+(f[0]-c[0])/Math.PI],m=[f[0]-(f[0]-c[0])/Math.PI,f[1]-(f[1]-c[1])/Math.PI];n+=`M ${a.join(",")} C ${g} ${m} ${c.join(",")}`}else{const f=te((u=e[l-1])==null?void 0:u.value),g=[a[0]+(a[0]-f[0])/Math.PI,a[1]+(a[1]-f[1])/Math.PI],m=[c[0]-(c[0]-a[0])/Math.PI,c[1]-(c[1]-a[1])/Math.PI];n+=`M ${a.join(",")} C ${g} ${m} ${c.join(",")} `}}return e.forEach(l=>{const a=te(l.value);r+=`<circle cx="${a[0]}" cy="${a[1]}" r="3" fill="${t}" />`}),`<path d="${n}" stroke="${t}" stroke-width="1" fill="none" />${r}`}function te(e){let t=e.split(",").map(n=>parseInt(n));return t[1]=255-t[1],t}function Di(e){var t,n,r,i,s,o,u,l,a,c,f,g,m,x,_,F,C,b,N,w,G,X,V,ee,p,O,T,ut,at,ct,lt,ft,dt,pt,gt,mt,ht,St,Et,It,Tt,xt,Ft,At,_t,Ct,bt,Pt,yt,Nt,Rt,Ot,vt,Lt,Dt,Ut,Mt,Gt,Bt,kt,$t,Ht,Zt,wt,Xt,Yt,jt,zt,Kt,Wt,qt,Jt,Qt,Vt,en,tn,nn,rn,on,sn,un,an,cn,ln,fn,dn,pn,gn,mn,hn,Sn,En,In,Tn,xn,Fn,An,_n,Cn,bn,Pn,yn,Nn,Rn,On,vn,Ln,Dn,Un,Mn,Gn,Bn,kn;return`
	<h3>Settings</h3>
	<div class="block">
	<span class="label">Look</span>
	  ${((n=(t=e.Look)==null?void 0:t.value.Name)==null?void 0:n.value)??"Look not available"}
	  ${(i=(r=e.Look)==null?void 0:r.value.Amount)!=null&&i.value?h("Amount","slider-bw",Math.round(parseFloat((o=(s=e.Look)==null?void 0:s.value.Amount)==null?void 0:o.value)*100),0,200):""}
	<span class="label">White Balance</span>
	${h("Temp","slider-temperature",((u=e.Temperature)==null?void 0:u.value)??((l=e.IncrementalTemperature)==null?void 0:l.value),"Temperature"in e?2e3:-100,"Temperature"in e?5e4:100)}
	${h("Tint","slider-tint",((a=e.Tint)==null?void 0:a.value)??((c=e.IncrementalTint)==null?void 0:c.value),"Tint"in e?-150:-100,"Tint"in e?150:100)}
	</div>
	<div class="block">
  <span class="label">Basic Settings</span>
	${h("Exposure","slider-bw",(f=e.Exposure2012)==null?void 0:f.value,-5,5)}
	${h("Contrast","slider-bw",(g=e.Contrast2012)==null?void 0:g.value,-100,100)}
	${h("Highlights","slider-bw",(m=e.Highlights2012)==null?void 0:m.value,-100,100)}
	${h("Shadows","slider-bw",(x=e.Shadows2012)==null?void 0:x.value,-100,100)}
	${h("Whites","slider-bw",(_=e.Whites2012)==null?void 0:_.value,-100,100)}
	${h("Blacks","slider-bw",(F=e.Blacks2012)==null?void 0:F.value,-100,100)}
	</div>
	<div class="block">
	<span class="label">Presence</span>
	${h("Texture","slider-bw",(C=e.Texture)==null?void 0:C.value,-100,100)}
	${h("Clarity","slider-bw",(b=e.Clarity2012)==null?void 0:b.value,-100,100)}
	${h("Dehaze","slider-bw",(N=e.Dehaze)==null?void 0:N.value,-100,100)}
	${h("Vibrance","slider-bw",(w=e.Vibrance)==null?void 0:w.value,-100,100)}
	${h("Saturation","slider-bw",(G=e.Saturation)==null?void 0:G.value,-100,100)}
	</div>
	<div class="block">
	<span class="label">Curves</span>
	<div>
	<svg version="1.1" baseProfile="full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 255 255" class="curves">
	<rect width="102%" height="33%" x="-1%" y="33%" fill="none" stroke="#4c4c53" stroke-width="1" stroke-dasharray="4,4" />>
	<rect width="33%" height="102%" y="-1%" x="33%" fill="none" stroke="#4c4c53" stroke-width="1" stroke-dasharray="4,4" />
  ${ae((X=e.ToneCurvePV2012Red)==null?void 0:X.value,"red")}
  ${ae((V=e.ToneCurvePV2012Green)==null?void 0:V.value,"green")}
  ${ae((ee=e.ToneCurvePV2012Blue)==null?void 0:ee.value,"blue")}
  ${ae((p=e.ToneCurvePV2012)==null?void 0:p.value,"white")}
	</svg>
	</div>
	</div>
	<div class="block">
	<span class="label">HSL</span>
		<div class="hsl-values">
		Red
			<div class="value">H${(O=e.HueAdjustmentRed)==null?void 0:O.value}</div>
			<div class="value">S${(T=e.SaturationAdjustmentRed)==null?void 0:T.value}</div>
			<div class="value">L${(ut=e.LuminanceAdjustmentRed)==null?void 0:ut.value}</div>
		Orange
			<div class="value">H${(at=e.HueAdjustmentOrange)==null?void 0:at.value}</div>
			<div class="value">S${(ct=e.SaturationAdjustmentOrange)==null?void 0:ct.value}</div>
			<div class="value">L${(lt=e.LuminanceAdjustmentOrange)==null?void 0:lt.value}</div>
		Yellow
			<div class="value">H${(ft=e.HueAdjustmentYellow)==null?void 0:ft.value}</div>
			<div class="value">S${(dt=e.SaturationAdjustmentYellow)==null?void 0:dt.value}</div>
			<div class="value">L${(pt=e.LuminanceAdjustmentYellow)==null?void 0:pt.value}</div>
		Green
			<div class="value">H${(gt=e.HueAdjustmentGreen)==null?void 0:gt.value}</div>
			<div class="value">S${(mt=e.SaturationAdjustmentGreen)==null?void 0:mt.value}</div>
			<div class="value">L${(ht=e.LuminanceAdjustmentGreen)==null?void 0:ht.value}</div>
		Aqua
			<div class="value">H${(St=e.HueAdjustmentAqua)==null?void 0:St.value}</div>
			<div class="value">S${(Et=e.SaturationAdjustmentAqua)==null?void 0:Et.value}</div>
			<div class="value">L${(It=e.LuminanceAdjustmentAqua)==null?void 0:It.value}</div>
		Blue
			<div class="value">H${(Tt=e.HueAdjustmentBlue)==null?void 0:Tt.value}</div>
			<div class="value">S${(xt=e.SaturationAdjustmentBlue)==null?void 0:xt.value}</div>
			<div class="value">L${(Ft=e.LuminanceAdjustmentBlue)==null?void 0:Ft.value}</div>
		Purple
			<div class="value">H${(At=e.HueAdjustmentPurple)==null?void 0:At.value}</div>
			<div class="value">S${(_t=e.SaturationAdjustmentPurple)==null?void 0:_t.value}</div>
			<div class="value">L${(Ct=e.LuminanceAdjustmentPurple)==null?void 0:Ct.value}</div>
		Magenta
			<div class="value">H${(bt=e.HueAdjustmentMagenta)==null?void 0:bt.value}</div>
			<div class="value">S${(Pt=e.SaturationAdjustmentMagenta)==null?void 0:Pt.value}</div>
			<div class="value">L${(yt=e.LuminanceAdjustmentMagenta)==null?void 0:yt.value}</div>
		</div>
	</div>
	<div class="block">
	<span class="label">Split Toning</span>
	<span class="label">Shadows</span>
	${h("Hue","slider-rainbow",(Nt=e.SplitToningShadowHue)==null?void 0:Nt.value,0,360)}
	${h("Saturation","slider-blackred",(Rt=e.SplitToningShadowSaturation)==null?void 0:Rt.value,0,100)}
	<span class="label">Highlights</span>
	${h("Hue","slider-rainbow",(Ot=e.SplitToningHighlightHue)==null?void 0:Ot.value,0,360)}
	${h("Saturation","slider-blackred",(vt=e.SplitToningHighlightSaturation)==null?void 0:vt.value,0,100)}
	<span class="label">Balance</span>
	${h("Balance","slider-bw",(Lt=e.SplitToningBalance)==null?void 0:Lt.value,-100,100)}
	</div>
	<div class="block">
	<span class="label">Color Grading</span>
  <div class="row">
    ${((Dt=e.ColorGradeGlobalSat)==null?void 0:Dt.value)!=="0"?ue("Global",((Ut=e.ColorGradeGlobalLum)==null?void 0:Ut.value)??0,((Mt=e.ColorGradeGlobalHue)==null?void 0:Mt.value)??0,((Gt=e.ColorGradeGlobalSat)==null?void 0:Gt.value)??0):""}
    ${ue("Midtones",((Bt=e.ColorGradeMidtoneLum)==null?void 0:Bt.value)??0,((kt=e.ColorGradeMidtoneHue)==null?void 0:kt.value)??0,(($t=e.ColorGradeMidtoneSat)==null?void 0:$t.value)??0)}
  </div>
  <div class="row">
    ${ue("Shadows",((Ht=e.ColorGradeShadowLum)==null?void 0:Ht.value)??0,((Zt=e.ColorGradeShadowHue)==null?void 0:Zt.value)??0,((wt=e.ColorGradeShadowSat)==null?void 0:wt.value)??0)}
    ${ue("Highlights",((Xt=e.ColorGradeHighlightLum)==null?void 0:Xt.value)??0,((Yt=e.ColorGradeHighlightHue)==null?void 0:Yt.value)??0,((jt=e.ColorGradeHighlightSat)==null?void 0:jt.value)??0)}
  </div>
  	${h("Blending","slider-bw",((zt=e.ColorGradeBlending)==null?void 0:zt.value)??0,0,100)}
  	${h("Balance","slider-bw",((Kt=e.ColorGradeBalance)==null?void 0:Kt.value)??0,-100,100)}
  </div>
	<div class="block">
	<span class="label">Details</span>
	<div class="cell">Sharpening</div>
	${h("Amount","slider-blackred",(Wt=e.Sharpness)==null?void 0:Wt.value,0,150)}
	${h("Radius","slider-bw",(qt=e.SharpenRadius)==null?void 0:qt.value,0,3)}
	${h("Detail","slider-bw",(Jt=e.SharpenDetail)==null?void 0:Jt.value,0,100)}
	${h("Masking","slider-whiteblack",(Qt=e.SharpenEdgeMasking)==null?void 0:Qt.value,0,100)}
	<div class="cell">Noise Reduction</div>
	<span class="label">Luminosity</span>
	${h("Amount","slider-bw",(Vt=e.LuminanceSmoothing)==null?void 0:Vt.value,0,100)}
	${(en=e.LuminanceNoiseReductionDetail)!=null&&en.value?h("Detail","slider-bw",(tn=e.LuminanceNoiseReductionDetail)==null?void 0:tn.value,0,100):""}
	${(nn=e.LuminanceNoiseReductionContrast)!=null&&nn.value?h("Contrast","slider-bw",(rn=e.LuminanceNoiseReductionContrast)==null?void 0:rn.value,0,100):""}
	<div class="cell">Color</div>
	<span class="label">Color</span>
	${"ColorNoiseReduction"in e?h("Amount","slider-bw",(on=e.ColorNoiseReduction)==null?void 0:on.value,0,100):""}
	${"ColorNoiseReductionDetail"in e?h("Detail","slider-bw",(sn=e.ColorNoiseReductionDetail)==null?void 0:sn.value,0,100):""}
	${"ColorNoiseReductionSmoothness"in e?h("Smoothness","slider-bw",(un=e.ColorNoiseReductionSmoothness)==null?void 0:un.value,0,100):""}
	</div>
	<div class="block">
	<span class="label">Corrections</span>
		<div class="cell">Distortion <span>${(an=e.DistortionCorrectionAlreadyApplied)!=null&&an.value?(cn=e.DistortionCorrectionAlreadyApplied)==null?void 0:cn.value:"False"}</span></div>
		<div class="cell">Vignette <span>${(ln=e.VignetteCorrectionAlreadyApplied)!=null&&ln.value?(fn=e.VignetteCorrectionAlreadyApplied)==null?void 0:fn.value:"False"}</span></div>
		<div class="cell">CA <span>${(dn=e.LateralChromaticAberrationCorrectionAlreadyApplied)!=null&&dn.value?(pn=e.LateralChromaticAberrationCorrectionAlreadyApplied)==null?void 0:pn.value:"False"}</span></div>
		<div class="cell">Upright <span>${parseInt((gn=e.PerspectiveUpright)==null?void 0:gn.value)>=1?"True":"False"}</span></div>
	</div>
	<div class="block">
	<span class="label">Effects</span>
  <div class="cell">
  Lens Blur <span>${(hn=(mn=e.LensBlur)==null?void 0:mn.value)!=null&&hn.Active?"True":"False"}</span>
  </div>
	<div>
	<span class="label">Vignette</span>
	${(Sn=e.PostCropVignetteAmount)!=null&&Sn.value?h("Amount","slider-bw",(En=e.PostCropVignetteAmount)==null?void 0:En.value,-100,100):""}
	${(In=e.PostCropVignetteMidpoint)!=null&&In.value?h("Midpoint","slider-bw",(Tn=e.PostCropVignetteMidpoint)==null?void 0:Tn.value,0,100):""}
	${(xn=e.PostCropVignetteRoundness)!=null&&xn.value?h("Roundness","slider-bw",(Fn=e.PostCropVignetteRoundness)==null?void 0:Fn.value,-100,100):""}
	${(An=e.PostCropVignetteFeather)!=null&&An.value?h("Feather","slider-bw",(_n=e.PostCropVignetteFeather)==null?void 0:_n.value,0,100):""}
	${(Cn=e.PostCropVignetteHighlightContrast)!=null&&Cn.value?h("Highlights","slider-bw",(bn=e.PostCropVignetteHighlightContrast)==null?void 0:bn.value,0,100):""}
	</div>
	<span class="label">Grain</span>
	${(Pn=e.GrainAmount)!=null&&Pn.value?h("Amount","slider-bw",(yn=e.GrainAmount)==null?void 0:yn.value,0,100):""}
	${(Nn=e.GrainSize)!=null&&Nn.value?h("Size","slider-bw",(Rn=e.GrainSize)==null?void 0:Rn.value,0,100):""}
	${(On=e.GrainFrequency)!=null&&On.value?h("Frequency","slider-bw",(vn=e.GrainFrequency)==null?void 0:vn.value,0,100):""}
	</div>
	<div class="block">
	<span class="label">Calibration</span>
	<div>
	${h("Shadow Tint","slider-tint",(Ln=e.ShadowTint)==null?void 0:Ln.value,-100,100)}
	</div>
	<div>
	<span class="label">Red</span>
	${h("Hue","slider-magentaorange",(Dn=e.RedHue)==null?void 0:Dn.value,-100,100)}
	${h("Saturation","slider-blackred",(Un=e.RedSaturation)==null?void 0:Un.value,-100,100)}
	<span class="label">Green</span>
	${h("Hue","slider-yellowaqua",(Mn=e.GreenHue)==null?void 0:Mn.value,-100,100)}
	${h("Saturation","slider-blackgreen",(Gn=e.GreenSaturation)==null?void 0:Gn.value,-100,100)}
	<span class="label">Blue</span>
	${h("Hue","slider-aquapurple",(Bn=e.BlueHue)==null?void 0:Bn.value,-100,100)}
	${h("Saturation","slider-blackblue",(kn=e.BlueSaturation)==null?void 0:kn.value,-100,100)}
	</div>
	`}let vr=class{constructor(t){if(Ui(t))throw new Error("DataView: Passed buffer type is unsupported.");this.buffer=t,this.byteLength=this.buffer.length}getUint8(t){return this.buffer.readUInt8(t)}getUint16(t,n){return n?this.buffer.readUInt16LE(t):this.buffer.readUInt16BE(t)}getUint32(t,n){return n?this.buffer.readUInt32LE(t):this.buffer.readUInt32BE(t)}getInt32(t,n){return n?this.buffer.readInt32LE(t):this.buffer.readInt32BE(t)}};function Ui(e){return typeof e!="object"||e.length===void 0||e.readUInt8===void 0||e.readUInt16LE===void 0||e.readUInt16BE===void 0||e.readUInt32LE===void 0||e.readUInt32BE===void 0||e.readInt32LE===void 0||e.readInt32BE===void 0}function $n(e,t,n){try{return new DataView(e,t,n)}catch{return new vr(e,t,n)}}function E(e,t,n){const r=[];for(let i=0;i<n&&t+i<e.byteLength;i++)r.push(e.getUint8(t+i));return j(r)}function q(e,t){const n=[];let r=0;for(;t+r<e.byteLength;){const i=e.getUint8(t+r);if(i===0)break;n.push(i),r++}return j(n)}function Mi(e,t,n){const r=[];for(let i=0;i<n&&t+i<e.byteLength;i+=2)r.push(e.getUint16(t+i));return r[r.length-1]===0&&r.pop(),j(r)}function Lr(e,t){const n=e.getUint8(t),r=E(e,t+1,n);return[n,r]}function j(e){return e.map(t=>String.fromCharCode(t)).join("")}function I(){for(let e=1;e<arguments.length;e++)for(const t in arguments[e])arguments[0][t]=arguments[e][t];return arguments[0]}function Dr(e,t,n){let r=!1;Object.defineProperty(e,t,{get(){return r||(r=!0,Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n.apply(e),writable:!0})),e[t]},configurable:!0,enumerable:!0})}function Ur(e){if(typeof btoa<"u")return btoa(typeof e=="string"?e:Array.prototype.reduce.call(new Uint8Array(e),(t,n)=>t+String.fromCharCode(n),""));if(!(typeof Buffer>"u"))return typeof Buffer.from<"u"?Buffer.from(e).toString("base64"):new Buffer(e).toString("base64")}function Gi(e){const t=e.substring(e.indexOf(",")+1);if(e.indexOf(";base64")!==-1)return typeof atob<"u"?Uint8Array.from(atob(t),r=>r.charCodeAt(0)).buffer:typeof Buffer>"u"?void 0:typeof Buffer.from<"u"?Buffer.from(t,"base64"):new Buffer(t,"base64");const n=decodeURIComponent(t);return typeof Buffer<"u"?typeof Buffer.from<"u"?Buffer.from(n):new Buffer(n):Uint8Array.from(n,r=>r.charCodeAt(0)).buffer}function Bi(e,t,n){return Mr(n,t-e.length)+e}function ki(e,t){return parseInt(e.replace(".",""),t)/Math.pow(t,(e.split(".")[1]||"").length)}function Mr(e,t){return new Array(t+1).join(e)}const Ie=void 0,Gr=0;function Br(e,t,n,r="string"){if(t===Gr&&typeof DecompressionStream=="function"){const i=new DecompressionStream("deflate"),s=new Blob([e]).stream().pipeThrough(i);return r==="dataview"?new Response(s).arrayBuffer().then(o=>new DataView(o)):new Response(s).arrayBuffer().then(o=>new TextDecoder(n).decode(o))}return t!==void 0?Promise.reject(`Unknown compression method ${t}.`):e}const Hn={USE_FILE:!0,USE_JFIF:!0,USE_PNG_FILE:!0,USE_EXIF:!0,USE_IPTC:!0,USE_XMP:!0,USE_ICC:!0,USE_MPF:!0,USE_PHOTOSHOP:!0,USE_THUMBNAIL:!0,USE_TIFF:!0,USE_JPEG:!0,USE_PNG:!0,USE_HEIC:!0,USE_AVIF:!0,USE_WEBP:!0,USE_GIF:!0,USE_MAKER_NOTES:!0};function A(e){return e.map(t=>String.fromCharCode(t)).join("")}function Me(e){if(e.length>=8){const t=A(e.slice(0,8));if(t==="ASCII\0\0\0")return A(e.slice(8));if(t==="JIS\0\0\0\0\0")return"[JIS encoded text]";if(t==="UNICODE\0")return"[Unicode encoded text]";if(t==="\0\0\0\0\0\0\0\0")return"[Undefined encoding]"}return"Undefined"}function Te(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}const Ge=18761,Be=19789,L={BIG_ENDIAN:Be,LITTLE_ENDIAN:Ge,getByteOrder:$i};function $i(e,t){if(e.getUint16(t)===Ge)return Ge;if(e.getUint16(t)===Be)return Be;throw new Error("Illegal byte order value. Faulty image.")}const Zn={isTiffFile:Hi,findTiffOffsets:wi};function Hi(e){return!!e&&e.byteLength>=4&&Zi(e)}function Zi(e){const r=e.getUint16(0)===L.LITTLE_ENDIAN;return e.getUint16(2,r)===42}function wi(){return{hasAppMarkers:!0,tiffHeaderOffset:0}}const wn={isJpegFile:oo,findJpegOffsets:so},Xi=2,Yi=65496,Xn=2,R=4,y=2,ji=2,zi=10,Ki=18,Yn=33,jn=79,zn=18,Wi=8,ke="ICC_PROFILE\0",kr=R+ke.length,qi=kr+1,Kn="MPF\0",$r=65472,Hr=65474,Ji=65476,Qi=65499,Vi=65501,eo=65498,Zr=65504,et=65505,wr=65506,to=65517,no=65519,ro=65534,io=65535,Wn="JFIF",qn="Exif",Jn="http://ns.adobe.com/xap/1.0/\0",Qn="http://ns.adobe.com/xmp/extension/\0",Vn="Photoshop 3.0";function oo(e){return!!e&&e.byteLength>=Xi&&e.getUint16(0)===Yi}function so(e){let t=Xn,n,r,i,s,o,u,l,a,c;for(;t+R+5<=e.byteLength;){if(uo(e,t))n=e.getUint16(t+y),r=t+y;else if(ao(e,t))n=e.getUint16(t+y),i=t+y;else if(fo(e,t))n=e.getUint16(t+y),s=t+ji;else if(po(e,t))n=e.getUint16(t+y),o=t+zi;else if(go(e,t))l||(l=[]),n=e.getUint16(t+y),l.push(Eo(t,n));else if(ho(e,t))l||(l=[]),n=e.getUint16(t+y),l.push(Io(t,n));else if(To(e,t))n=e.getUint16(t+y),u=t+Ki;else if(co(e,t)){n=e.getUint16(t+y);const f=t+zn,g=n-(zn-y),m=e.getUint8(t+kr),x=e.getUint8(t+qi);a||(a=[]),a.push({offset:f,length:g,chunkNumber:m,chunksTotal:x})}else if(lo(e,t))n=e.getUint16(t+y),c=t+Wi;else if(xo(e,t))n=e.getUint16(t+y);else if(Fo(e,t)){t++;continue}else break;t+=y+n}return{hasAppMarkers:t>Xn,fileDataOffset:r||i,jfifDataOffset:s,tiffHeaderOffset:o,iptcDataOffset:u,xmpChunks:l,iccChunks:a,mpfDataOffset:c}}function uo(e,t){return e.getUint16(t)===$r}function ao(e,t){return e.getUint16(t)===Hr}function co(e,t){const n=ke.length;return e.getUint16(t)===wr&&E(e,t+R,n)===ke}function lo(e,t){const n=Kn.length;return e.getUint16(t)===wr&&E(e,t+R,n)===Kn}function fo(e,t){const n=Wn.length;return e.getUint16(t)===Zr&&E(e,t+R,n)===Wn&&e.getUint8(t+R+n)===0}function po(e,t){const n=qn.length;return e.getUint16(t)===et&&E(e,t+R,n)===qn&&e.getUint8(t+R+n)===0}function go(e,t){return e.getUint16(t)===et&&mo(e,t)}function mo(e,t){const n=Jn.length;return E(e,t+R,n)===Jn}function ho(e,t){return e.getUint16(t)===et&&So(e,t)}function So(e,t){const n=Qn.length;return E(e,t+R,n)===Qn}function Eo(e,t){return{dataOffset:e+Yn,length:t-(Yn-y)}}function Io(e,t){return{dataOffset:e+jn,length:t-(jn-y)}}function To(e,t){const n=Vn.length;return e.getUint16(t)===to&&E(e,t+R,n)===Vn&&e.getUint8(t+R+n)===0}function xo(e,t){const n=e.getUint16(t);return n>=Zr&&n<=no||n===ro||n===$r||n===Hr||n===Ji||n===Qi||n===Vi||n===eo}function Fo(e,t){return e.getUint16(t)===io}const er={isPngFile:Co,findPngOffsets:bo},$e=`PNG\r

`,xe=4,v=4,J=0,H=xe,P=xe+v,He="XML:com.adobe.xmp\0",tt="tEXt",z="iTXt",Ae="zTXt",Xr="pHYs",Yr="tIME",Ao="eXIf",_o="iCCP";function Co(e){return!!e&&E(e,0,$e.length)===$e}function bo(e,t){const r={hasAppMarkers:!1};let i=$e.length;for(;i+xe+v<=e.byteLength;){if(Po(e,i))r.hasAppMarkers=!0,r.pngHeaderOffset=i+P;else if(yo(e,i)){const s=Lo(e,i);s!==void 0&&(r.hasAppMarkers=!0,r.xmpChunks=[{dataOffset:s,length:e.getUint32(i+J)-(s-(i+P))}])}else if(No(e,i,t)){r.hasAppMarkers=!0;const s=E(e,i+H,v);r.pngTextChunks||(r.pngTextChunks=[]),r.pngTextChunks.push({length:e.getUint32(i+J),type:s,offset:i+P})}else if(Ro(e,i))r.hasAppMarkers=!0,r.tiffHeaderOffset=i+P;else if(t&&Oo(e,i)){r.hasAppMarkers=!0;const s=e.getUint32(i+J),o=i+P,{profileName:u,compressionMethod:l,compressedProfileOffset:a}=Do(e,o);r.iccChunks||(r.iccChunks=[]),r.iccChunks.push({offset:a,length:s-(a-o),chunkNumber:1,chunksTotal:1,profileName:u,compressionMethod:l})}else vo(e,i)&&(r.hasAppMarkers=!0,r.pngChunkOffsets||(r.pngChunkOffsets=[]),r.pngChunkOffsets.push(i+J));i+=e.getUint32(i+J)+xe+v+4}return r}function Po(e,t){return E(e,t+H,v)==="IHDR"}function yo(e,t){return E(e,t+H,v)===z&&E(e,t+P,He.length)===He}function No(e,t,n){const r=E(e,t+H,v);return r===tt||r===z||r===Ae&&n}function Ro(e,t){return E(e,t+H,v)===Ao}function Oo(e,t){return E(e,t+H,v)===_o}function vo(e,t){const n=[Xr,Yr],r=E(e,t+H,v);return n.includes(r)}function Lo(e,t){t+=P+He.length+1+1;let i=0;for(;i<2&&t<e.byteLength;)e.getUint8(t)===0&&i++,t++;if(!(i<2))return t}function Do(e,t){const i=q(e,t);t+=i.length+1;const s=e.getUint8(t);return t+=1,{profileName:i,compressionMethod:s,compressedProfileOffset:t}}function Uo(e,t){return e.getUint32(t+4)}function Mo(e,t,n,r){const{offsets:s,sizes:o}=Go(t,n+3),u=e.getUint8(s.offsetSize)>>4;o.item.extent.extentOffset=u;const l=e.getUint8(s.lengthSize)&15;o.item.extent.extentLength=l;const a=e.getUint8(s.baseOffsetSize)>>4;o.item.baseOffset=a;const c=Bo(e,s.indexSize,t);o.item.extent.extentIndex=c!==void 0?c:0;const f=ko(e,s.itemCount,t);return{type:"iloc",items:$o(e,t,s,o,u,l,c,f),length:r}}function Go(e,t){const n={item:{dataReferenceIndex:2,extentCount:2,extent:{}}};e<2?(n.itemCount=2,n.item.itemId=2):e===2&&(n.itemCount=4,n.item.itemId=4),e===1||e===2?n.item.constructionMethod=2:n.item.constructionMethod=0;const r={offsetSize:t,lengthSize:t,baseOffsetSize:t+1,indexSize:t+1};return r.itemCount=t+2,r.items=r.itemCount+n.itemCount,r.item={itemId:0},r.item.constructionMethod=r.item.itemId+n.item.itemId,r.item.dataReferenceIndex=r.item.constructionMethod+n.item.constructionMethod,{offsets:r,sizes:n}}function Bo(e,t,n){if(n===1||n===2)return e.getUint8(t)&15}function ko(e,t,n){if(n<2)return e.getUint16(t);if(n===2)return e.getUint32(t)}function $o(e,t,n,r,i,s,o,u){if(u===void 0)return[];const l=[];let a=n.items;for(let c=0;c<u;c++){const f={extents:[]};f.itemId=Ho(e,a,t),a+=r.item.itemId,f.constructionMethod=t===1||t===2?e.getUint16(a)&15:void 0,a+=r.item.constructionMethod,f.dataReferenceIndex=e.getUint16(a),a+=r.item.dataReferenceIndex,f.baseOffset=ge(e,a,r.item.baseOffset),a+=r.item.baseOffset,f.extentCount=e.getUint16(a),a+=r.item.extentCount;for(let g=0;g<f.extentCount;g++){const m={};m.extentIndex=Zo(e,t,a,o),a+=r.item.extent.extentIndex,m.extentOffset=ge(e,a,i),a+=r.item.extent.extentOffset,m.extentLength=ge(e,a,s),a+=r.item.extent.extentLength,f.extents.push(m)}l.push(f)}return l}function Ho(e,t,n){if(n<2)return e.getUint16(t);if(n===2)return e.getUint32(t)}function Zo(e,t,n,r){if((t===1||t===2)&&r>0)return ge(e,n,r)}function ge(e,t,n){return n===4?e.getUint32(t):n===8?(console.warn("This file uses an 8-bit offset which is currently not supported by ExifReader. Contact the maintainer to get it fixed."),Uo(e,t)):0}const wo=1718909296,Xo=1768977008,Yo=1835365473,jo=1768714083,zo=1768517222,Ko=1768842853,Wo=1768973167,qo=1668246642,jr=1165519206,nt=1835625829,Jo=1970432288;function _e(e,t){const{length:s,contentOffset:o}=Qo(e,t);if(s<8)return;const u=e.getUint32(t+4);if(u===wo)return cs(e,o,s);if(u===Xo)return ls(e,t,o,s);if(u===Wo)return fs(e,t,o,s);if(u===qo)return ds(e,o,s);const l=e.getUint8(o);return u===Yo?gs(e,t,o+1,s):u===jo?Mo(e,l,o+1,s):u===zo?ms(e,t,l,o+1,s):u===Ko?Ss(e,t,l,o+1,s):{type:void 0,length:s}}function Qo(e,t){const o=e.getUint32(t);return Vo(o)?{length:e.byteLength-t,contentOffset:t+4+4}:es(o)&&ts(e,t)?{length:e.getUint32(t+12),contentOffset:t+4+4+8}:{length:o,contentOffset:t+4+4}}function Vo(e){return e===0}function es(e){return e===1}function ts(e,t){return e.getUint32(t+8)===0}function zr(e){{const t={},n=ns(e);return n?(t.tiffHeaderOffset=rs(e,n),t.xmpChunks=ss(n),t.iccChunks=as(n),t.hasAppMarkers=t.tiffHeaderOffset!==void 0||t.xmpChunks!==void 0||t.iccChunks!==void 0,t):{hasAppMarkers:!1}}}function ns(e){let r=0;for(;r+4+4<=e.byteLength;){const i=_e(e,r);if(i===void 0)break;if(i.type==="meta")return i;r+=i.length}}function rs(e,t){try{const n=is(t).itemId,r=Ze(t,n),i=r.baseOffset+r.extents[0].extentOffset;return os(e,i)}catch{return}}function is(e){return e.subBoxes.find(t=>t.type==="iinf").itemInfos.find(t=>t.itemType===jr)}function Ze(e,t){return e.subBoxes.find(n=>n.type==="iloc").items.find(n=>n.itemId===t)}function os(e,t){return t+4+e.getUint32(t)}function ss(e){try{const t=us(e).itemId,n=Ze(e,t),r=Ze(e,t).extents[0];return[{dataOffset:n.baseOffset+r.extentOffset,length:r.extentLength}]}catch{return}}function us(e){return e.subBoxes.find(t=>t.type==="iinf").itemInfos.find(t=>t.itemType===nt&&t.contentType==="application/rdf+xml")}function as(e){try{const t=e.subBoxes.find(n=>n.type==="iprp").subBoxes.find(n=>n.type==="ipco").properties.find(n=>n.type==="colr").icc;if(t)return[t]}catch{}}function cs(e,t,n){return{type:"ftyp",majorBrand:E(e,t,4),length:n}}function ls(e,t,n,r){return{type:"iprp",subBoxes:Ce(e,n,r-(n-t)),length:r}}function fs(e,t,n,r){return{type:"ipco",properties:Ce(e,n,r-(n-t)),length:r}}function ds(e,t,n){return{type:"colr",icc:ps(e,t),length:n}}function ps(e,t){const r=E(e,t,4);if(!(r!=="prof"&&r!=="rICC"))return{offset:t+4,length:e.getUint32(t+4),chunkNumber:1,chunksTotal:1}}function gs(e,t,n,r){return{type:"meta",subBoxes:Ce(e,n+3,r-(n+3-t)),length:r}}function Ce(e,t,n){const r=[jr,nt],i=[];let s=t;for(;s<t+n;){const o=_e(e,s);if(o===void 0)break;o.type!==void 0&&(o.itemType===void 0||r.indexOf(o.itemType)!==-1)&&i.push(o),s+=o.length}return i}function ms(e,t,n,r,i){const{offsets:s}=hs(n,r);return{type:"iinf",itemInfos:Ce(e,s.itemInfos,i-(s.itemInfos-t)),length:i}}function hs(e,t){const r={entryCount:t+3},i={};return e===0?i.entryCount=2:i.entryCount=4,r.itemInfos=r.entryCount+i.entryCount,{offsets:r}}function Ss(e,t,n,r,i){r+=3;const o={type:"infe",length:i};return(n===0||n===1)&&(o.itemId=e.getUint16(r),r+=2,o.itemProtectionIndex=e.getUint16(r),r+=2,o.itemName=q(e,r),r+=o.itemName.length+1),n>=2&&(n===2?(o.itemId=e.getUint16(r),r+=2):n===3&&(o.itemId=e.getUint32(r),r+=4),o.itemProtectionIndex=e.getUint16(r),r+=2,o.itemType=e.getUint32(r),r+=4,o.itemName=q(e,r),r+=o.itemName.length+1,o.itemType===nt?(o.contentType=q(e,r),r+=o.contentType.length+1,t+i>r&&(o.contentEncoding=q(e,r),r+=o.contentEncoding.length+1)):o.itemType===Jo&&(o.itemUri=q(e,r),r+=o.itemUri.length+1)),o}const tr={isHeicFile:Es,findHeicOffsets:Is};function Es(e){if(!e)return!1;const t=["heic","heix","hevc","hevx","heim","heis","hevm","hevs","mif1"];try{const n=_e(e,0);return n&&t.indexOf(n.majorBrand)!==-1}catch{return!1}}function Is(e){return zr(e)}const nr={isAvifFile:Ts,findAvifOffsets:xs};function Ts(e){if(!e)return!1;try{const t=_e(e,0);return t&&t.majorBrand==="avif"}catch{return!1}}function xs(e){return zr(e)}const rr={isWebpFile:Fs,findOffsets:As};function Fs(e){const n="RIFF",i="WEBP";return!!e&&E(e,0,n.length)===n&&E(e,8,i.length)===i}function As(e){const r="Exif\0\0";let s=12,o=!1,u,l,a,c;for(;s+8<e.byteLength;){const f=E(e,s,4),g=e.getUint32(s+4,!0);f==="EXIF"?(o=!0,E(e,s+8,r.length)===r?u=s+8+r.length:u=s+8):f==="XMP "?(o=!0,l=[{dataOffset:s+8,length:g}]):f==="ICCP"?(o=!0,a=[{offset:s+8,length:g,chunkNumber:1,chunksTotal:1}]):f==="VP8X"&&(o=!0,c=s+8),s+=8+(g%2===0?g:g+1)}return{hasAppMarkers:o,tiffHeaderOffset:u,xmpChunks:l,iccChunks:a,vp8xChunkOffset:c}}const ir={isGifFile:bs,findOffsets:Ps},_s=6,Cs=["GIF87a","GIF89a"];function bs(e){return!!e&&Cs.includes(E(e,0,_s))}function Ps(){return{gifHeaderOffset:0}}const or={isXMLFile:ys,findOffsets:Ns},Kr=0,sr="<?xpacket begin";function ys(e){return!!e&&E(e,Kr,sr.length)===sr}function Ns(e){const t=[];return t.push({dataOffset:Kr,length:e.byteLength}),{xmpChunks:t}}const Rs={parseAppMarkers:Os};function Os(e,t){if(Zn.isTiffFile(e))return B(Zn.findTiffOffsets(),"tiff","TIFF");if(wn.isJpegFile(e))return B(wn.findJpegOffsets(e),"jpeg","JPEG");if(er.isPngFile(e))return B(er.findPngOffsets(e,t),"png","PNG");if(tr.isHeicFile(e))return B(tr.findHeicOffsets(e),"heic","HEIC");if(nr.isAvifFile(e))return B(nr.findAvifOffsets(e),"avif","AVIF");if(rr.isWebpFile(e))return B(rr.findOffsets(e),"webp","WebP");if(ir.isGifFile(e))return B(ir.findOffsets(e),"gif","GIF");if(or.isXMLFile(e))return B(or.findOffsets(e),"xml","XML");throw new Error("Invalid image format")}function B(e,t,n){return I({},e,{fileType:{value:t,description:n}})}const S={ApertureValue:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2),ColorSpace(e){return e===1?"sRGB":e===65535?"Uncalibrated":"Unknown"},ComponentsConfiguration(e){return e.map(t=>{if(t===49)return"Y";if(t===50)return"Cb";if(t===51)return"Cr";if(t===52)return"R";if(t===53)return"G";if(t===54)return"B"}).join("")},Contrast(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},CustomRendered(e){return e===0?"Normal process":e===1?"Custom process":"Unknown"},ExposureMode(e){return e===0?"Auto exposure":e===1?"Manual exposure":e===2?"Auto bracket":"Unknown"},ExposureProgram(e){return e===0?"Undefined":e===1?"Manual":e===2?"Normal program":e===3?"Aperture priority":e===4?"Shutter priority":e===5?"Creative program":e===6?"Action program":e===7?"Portrait mode":e===8?"Landscape mode":e===9?"Bulb":"Unknown"},ExposureTime(e){if(e[0]/e[1]>.25){const t=e[0]/e[1];return Number.isInteger(t)?""+t:t.toFixed(1)}return e[0]!==0?`1/${Math.round(e[1]/e[0])}`:`0/${e[1]}`},FNumber:e=>`f/${Number(e[0]/e[1]).toFixed(1)}`,FocalLength:e=>e[0]/e[1]+" mm",FocalPlaneResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},LightSource:e=>e===1?"Daylight":e===2?"Fluorescent":e===3?"Tungsten (incandescent light)":e===4?"Flash":e===9?"Fine weather":e===10?"Cloudy weather":e===11?"Shade":e===12?"Daylight fluorescent (D 5700 – 7100K)":e===13?"Day white fluorescent (N 4600 – 5400K)":e===14?"Cool white fluorescent (W 3900 – 4500K)":e===15?"White fluorescent (WW 3200 – 3700K)":e===17?"Standard light A":e===18?"Standard light B":e===19?"Standard light C":e===20?"D55":e===21?"D65":e===22?"D75":e===23?"D50":e===24?"ISO studio tungsten":e===255?"Other light source":"Unknown",MeteringMode(e){return e===1?"Average":e===2?"CenterWeightedAverage":e===3?"Spot":e===4?"MultiSpot":e===5?"Pattern":e===6?"Partial":e===255?"Other":"Unknown"},ResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},Saturation(e){return e===0?"Normal":e===1?"Low saturation":e===2?"High saturation":"Unknown"},SceneCaptureType(e){return e===0?"Standard":e===1?"Landscape":e===2?"Portrait":e===3?"Night scene":"Unknown"},Sharpness(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},ShutterSpeedValue(e){const t=Math.pow(2,e[0]/e[1]);return t<=1?`${Math.round(1/t)}`:`1/${Math.round(t)}`},WhiteBalance(e){return e===0?"Auto white balance":e===1?"Manual white balance":"Unknown"},XResolution:e=>""+Math.round(e[0]/e[1]),YResolution:e=>""+Math.round(e[0]/e[1])},Wr={11:"ProcessingSoftware",254:{name:"SubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",4294967295:"Invalid"})[e]||"Unknown"},255:{name:"OldSubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"})[e]||"Unknown"},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:e=>({1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"})[e]||"Unknown"},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:e=>({1:"Normal",2:"Reversed"})[e]||"Unknown"},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:e=>e===1?"top-left":e===2?"top-right":e===3?"bottom-right":e===4?"bottom-left":e===5?"left-top":e===6?"right-top":e===7?"right-bottom":e===8?"left-bottom":"Undefined"},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:S.XResolution},283:{name:"YResolution",description:S.YResolution},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:e=>""+Math.round(e[0]/e[1])},287:{name:"YPosition",description:e=>""+Math.round(e[0]/e[1])},290:{name:"GrayResponseUnit",description:e=>({1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"})[e]||"Unknown"},296:{name:"ResolutionUnit",description:S.ResolutionUnit},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},319:{name:"PrimaryChromaticities",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:e=>({1:"CMYK",2:"Not CMYK"})[e]||"Unknown"},337:"TargetPrinter",338:{name:"ExtraSamples",description:e=>({0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"})[e]||"Unknown"},339:{name:"SampleFormat",description:e=>{const t={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(e)?e.map(n=>t[n]||"Unknown").join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:e=>e.map(t=>""+t[0]/t[1]).join("/")},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:e=>e===1?"centered":e===2?"co-sited":"undefined "+e},532:{name:"ReferenceBlackWhite",description:e=>e.map(t=>""+t[0]/t[1]).join(", ")},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:e=>e.join("; ")},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:{name:"XPTitle",description:ne},40092:{name:"XPComment",description:ne},40093:{name:"XPAuthor",description:ne},40094:{name:"XPKeywords",description:ne},40095:{name:"XPSubject",description:ne},42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:e=>({0:"Unsafe",1:"Safe"})[e]||"Unknown"},50778:{name:"CalibrationIlluminant1",description:S.LightSource},50779:{name:"CalibrationIlluminant2",description:S.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:e=>({0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"})[e]||"Unknown"},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:e=>({1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"})[e]||"Unknown"},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51108:{name:"ProfileLookTableEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:e=>({0:"Auto",1:"None"})[e]||"Unknown"},51111:"NewRawImageDigest",51112:"RawToPreviewGain"};function ne(e){return new TextDecoder("utf-16").decode(new Uint8Array(e)).replace(/\u0000+$/,"")}const vs={33434:{name:"ExposureTime",description:S.ExposureTime},33437:{name:"FNumber",description:S.FNumber},34850:{name:"ExposureProgram",description:S.ExposureProgram},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:()=>"[Raw OECF table data]"},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:e=>({1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"})[e]||"Unknown"},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:e=>A(e)},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:S.ComponentsConfiguration},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:S.ShutterSpeedValue},37378:{name:"ApertureValue",description:S.ApertureValue},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},37382:{name:"SubjectDistance",description:e=>e[0]/e[1]+" m"},37383:{name:"MeteringMode",description:S.MeteringMode},37384:{name:"LightSource",description:S.LightSource},37385:{name:"Flash",description:e=>e===0?"Flash did not fire":e===1?"Flash fired":e===5?"Strobe return light not detected":e===7?"Strobe return light detected":e===9?"Flash fired, compulsory flash mode":e===13?"Flash fired, compulsory flash mode, return light not detected":e===15?"Flash fired, compulsory flash mode, return light detected":e===16?"Flash did not fire, compulsory flash mode":e===24?"Flash did not fire, auto mode":e===25?"Flash fired, auto mode":e===29?"Flash fired, auto mode, return light not detected":e===31?"Flash fired, auto mode, return light detected":e===32?"No flash function":e===65?"Flash fired, red-eye reduction mode":e===69?"Flash fired, red-eye reduction mode, return light not detected":e===71?"Flash fired, red-eye reduction mode, return light detected":e===73?"Flash fired, compulsory flash mode, red-eye reduction mode":e===77?"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected":e===79?"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected":e===89?"Flash fired, auto mode, red-eye reduction mode":e===93?"Flash fired, auto mode, return light not detected, red-eye reduction mode":e===95?"Flash fired, auto mode, return light detected, red-eye reduction mode":"Unknown"},37386:{name:"FocalLength",description:S.FocalLength},37393:"ImageNumber",37394:{name:"SecurityClassification",description:e=>({C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"})[e]||"Unknown"},37395:"ImageHistory",37396:{name:"SubjectArea",description:e=>e.length===2?`Location; X: ${e[0]}, Y: ${e[1]}`:e.length===3?`Circle; X: ${e[0]}, Y: ${e[1]}, diameter: ${e[2]}`:e.length===4?`Rectangle; X: ${e[0]}, Y: ${e[1]}, width: ${e[2]}, height: ${e[3]}`:"Unknown"},37500:{name:"MakerNote",description:()=>"[Raw maker note data]"},37510:{name:"UserComment",description:Me},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37724:"ImageSourceData",37888:{name:"AmbientTemperature",description:e=>e[0]/e[1]+" °C"},37889:{name:"Humidity",description:e=>e[0]/e[1]+" %"},37890:{name:"Pressure",description:e=>e[0]/e[1]+" hPa"},37891:{name:"WaterDepth",description:e=>e[0]/e[1]+" m"},37892:{name:"Acceleration",description:e=>e[0]/e[1]+" mGal"},37893:{name:"CameraElevationAngle",description:e=>e[0]/e[1]+" °"},40960:{name:"FlashpixVersion",description:e=>e.map(t=>String.fromCharCode(t)).join("")},40961:{name:"ColorSpace",description:S.ColorSpace},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:()=>"[Raw SFR table data]"},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:S.FocalPlaneResolutionUnit},41492:{name:"SubjectLocation",description:([e,t])=>`X: ${e}, Y: ${t}`},41493:"ExposureIndex",41495:{name:"SensingMethod",description:e=>e===1?"Undefined":e===2?"One-chip color area sensor":e===3?"Two-chip color area sensor":e===4?"Three-chip color area sensor":e===5?"Color sequential area sensor":e===7?"Trilinear sensor":e===8?"Color sequential linear sensor":"Unknown"},41728:{name:"FileSource",description:e=>e===3?"DSC":"Unknown"},41729:{name:"SceneType",description:e=>e===1?"A directly photographed image":"Unknown"},41730:{name:"CFAPattern",description:()=>"[Raw CFA pattern table data]"},41985:{name:"CustomRendered",description:S.CustomRendered},41986:{name:"ExposureMode",description:S.ExposureMode},41987:{name:"WhiteBalance",description:S.WhiteBalance},41988:{name:"DigitalZoomRatio",description:e=>e[0]===0?"Digital zoom was not used":""+e[0]/e[1]},41989:{name:"FocalLengthIn35mmFilm",description:e=>e===0?"Unknown":e+" mm"},41990:{name:"SceneCaptureType",description:S.SceneCaptureType},41991:{name:"GainControl",description:e=>e===0?"None":e===1?"Low gain up":e===2?"High gain up":e===3?"Low gain down":e===4?"High gain down":"Unknown"},41992:{name:"Contrast",description:S.Contrast},41993:{name:"Saturation",description:S.Saturation},41994:{name:"Sharpness",description:S.Sharpness},41995:{name:"DeviceSettingDescription",description:()=>"[Raw device settings table data]"},41996:{name:"SubjectDistanceRange",description:e=>e===1?"Macro":e===2?"Close view":e===3?"Distant view":"Unknown"},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:e=>{const t=parseFloat((e[0][0]/e[0][1]).toFixed(5)),n=parseFloat((e[1][0]/e[1][1]).toFixed(5)),r=`${t}-${n} mm`;if(e[3][1]===0)return`${r} f/?`;const i=1/(e[2][1]/e[2][1]/(e[3][0]/e[3][1]));return`${r} f/${parseFloat(i.toFixed(5))}`}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:e=>({1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"})[e]||"Unknown"},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"},Ls={0:{name:"GPSVersionID",description:e=>e[0]===2&&e[1]===2&&e[2]===0&&e[3]===0?"Version 2.2":"Unknown"},1:{name:"GPSLatitudeRef",description:e=>{const t=e.join("");return t==="N"?"North latitude":t==="S"?"South latitude":"Unknown"}},2:{name:"GPSLatitude",description:Te},3:{name:"GPSLongitudeRef",description:e=>{const t=e.join("");return t==="E"?"East longitude":t==="W"?"West longitude":"Unknown"}},4:{name:"GPSLongitude",description:Te},5:{name:"GPSAltitudeRef",description:e=>e===0?"Sea level":e===1?"Sea level reference (negative value)":"Unknown"},6:{name:"GPSAltitude",description:e=>e[0]/e[1]+" m"},7:{name:"GPSTimeStamp",description:e=>e.map(([t,n])=>{const r=t/n;return/^\d(\.|$)/.test(`${r}`)?`0${r}`:r}).join(":")},8:"GPSSatellites",9:{name:"GPSStatus",description:e=>{const t=e.join("");return t==="A"?"Measurement in progress":t==="V"?"Measurement Interoperability":"Unknown"}},10:{name:"GPSMeasureMode",description:e=>{const t=e.join("");return t==="2"?"2-dimensional measurement":t==="3"?"3-dimensional measurement":"Unknown"}},11:"GPSDOP",12:{name:"GPSSpeedRef",description:e=>{const t=e.join("");return t==="K"?"Kilometers per hour":t==="M"?"Miles per hour":t==="N"?"Knots":"Unknown"}},13:"GPSSpeed",14:{name:"GPSTrackRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},15:"GPSTrack",16:{name:"GPSImgDirectionRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},17:"GPSImgDirection",18:"GPSMapDatum",19:{name:"GPSDestLatitudeRef",description:e=>{const t=e.join("");return t==="N"?"North latitude":t==="S"?"South latitude":"Unknown"}},20:{name:"GPSDestLatitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},21:{name:"GPSDestLongitudeRef",description:e=>{const t=e.join("");return t==="E"?"East longitude":t==="W"?"West longitude":"Unknown"}},22:{name:"GPSDestLongitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},23:{name:"GPSDestBearingRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},24:"GPSDestBearing",25:{name:"GPSDestDistanceRef",description:e=>{const t=e.join("");return t==="K"?"Kilometers":t==="M"?"Miles":t==="N"?"Knots":"Unknown"}},26:"GPSDestDistance",27:{name:"GPSProcessingMethod",description:Me},28:{name:"GPSAreaInformation",description:Me},29:"GPSDateStamp",30:{name:"GPSDifferential",description:e=>e===0?"Measurement without differential correction":e===1?"Differential correction applied":"Unknown"},31:"GPSHPositioningError"},Ds={1:"InteroperabilityIndex",2:{name:"InteroperabilityVersion",description:e=>A(e)},4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight"},Us={45056:{name:"MPFVersion",description:e=>A(e)},45057:"NumberOfImages",45058:"MPEntry",45059:"ImageUIDList",45060:"TotalFrames"},Ms={4:{name:"ShotInfo",description:e=>e}},Gs={0:{name:"PentaxVersion",description:e=>e.join(".")},5:"PentaxModelID",555:"LevelInfo"},ur=I({},Wr,vs),rt="0th",qr="1st",Jr="exif",Qr="gps",Vr="interoperability",ei="mpf",ti="canon",it="pentax",k={[rt]:ur,[qr]:Wr,[Jr]:ur,[Qr]:Ls,[Vr]:Ds,[ei]:Us,[ti]:Ms,[it]:Gs},ni={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4},we={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13},d={getAsciiValue:Bs,getByteAt:ri,getAsciiAt:ks,getShortAt:$s,getLongAt:Fe,getRationalAt:Hs,getUndefinedAt:Zs,getSlongAt:Xe,getSrationalAt:ws,getIfdPointerAt:Xs,typeSizes:ni,tagTypes:we,getTypeSize:Ys};function Bs(e){return e.map(t=>String.fromCharCode(t))}function ri(e,t){return e.getUint8(t)}function ks(e,t){return e.getUint8(t)}function $s(e,t,n){return e.getUint16(t,n===L.LITTLE_ENDIAN)}function Fe(e,t,n){return e.getUint32(t,n===L.LITTLE_ENDIAN)}function Hs(e,t,n){return[Fe(e,t,n),Fe(e,t+4,n)]}function Zs(e,t){return ri(e,t)}function Xe(e,t,n){return e.getInt32(t,n===L.LITTLE_ENDIAN)}function ws(e,t,n){return[Xe(e,t,n),Xe(e,t+4,n)]}function Xs(e,t,n){return Fe(e,t,n)}function Ys(e){if(we[e]===void 0)throw new Error("No such type found.");return ni[we[e]]}const js={1:d.getByteAt,2:d.getAsciiAt,3:d.getShortAt,4:d.getLongAt,5:d.getRationalAt,7:d.getUndefinedAt,9:d.getSlongAt,10:d.getSrationalAt,13:d.getIfdPointerAt};function ii(e,t,n){return t+d.getLongAt(e,t+4,n)}function Z(e,t,n,r,i,s){const o=d.getTypeSize("SHORT"),u=12,l={},a=zs(e,r,i);r+=o;for(let c=0;c<a&&!(r+u>e.byteLength);c++){const f=Ks(e,t,n,r,i,s);f!==void 0&&(l[f.name]={id:f.id,value:f.value,description:f.description},(f.name==="MakerNote"||t===it&&f.name==="LevelInfo")&&(l[f.name].__offset=f.__offset)),r+=u}if(r<e.byteLength-d.getTypeSize("LONG")){const c=d.getLongAt(e,r,i);c!==0&&t===rt&&(l.Thumbnail=Z(e,qr,n,n+c,i,s))}return l}function zs(e,t,n){return t+d.getTypeSize("SHORT")<=e.byteLength?d.getShortAt(e,t,n):0}function Ks(e,t,n,r,i,s){const u=d.getTypeSize("SHORT"),l=u+d.getTypeSize("SHORT"),a=l+d.getTypeSize("LONG"),c=d.getShortAt(e,r,i),f=d.getShortAt(e,r+u,i),g=d.getLongAt(e,r+l,i);let m,x;if(d.typeSizes[f]===void 0||!s&&k[t][c]===void 0)return;if(Ws(f,g))x=r+a,m=ar(e,x,f,g,i);else if(x=d.getLongAt(e,r+a,i),qs(e,n,x,f,g)){const C=c===33723;m=ar(e,n+x,f,g,i,C)}else m="<faulty value>";f===d.tagTypes.ASCII&&(m=Js(m),m=Qs(m));let _=`undefined-${c}`,F=m;if(k[t][c]!==void 0)if(k[t][c].name!==void 0&&k[t][c].description!==void 0){_=k[t][c].name;try{F=k[t][c].description(m)}catch{F=cr(m)}}else f===d.tagTypes.RATIONAL||f===d.tagTypes.SRATIONAL?(_=k[t][c],F=""+m[0]/m[1]):(_=k[t][c],F=cr(m));return{id:c,name:_,value:m,description:F,__offset:x}}function Ws(e,t){return d.typeSizes[e]*t<=d.getTypeSize("LONG")}function ar(e,t,n,r,i,s=!1){let o=[];s&&(r=r*d.typeSizes[n],n=d.tagTypes.BYTE);for(let u=0;u<r;u++)o.push(js[n](e,t,i)),t+=d.typeSizes[n];return n===d.tagTypes.ASCII?o=d.getAsciiValue(o):o.length===1&&(o=o[0]),o}function qs(e,t,n,r,i){return t+n+d.typeSizes[r]*i<=e.byteLength}function Js(e){const t=[];let n=0;for(let r=0;r<e.length;r++){if(e[r]==="\0"){n++;continue}t[n]===void 0&&(t[n]=""),t[n]+=e[r]}return t}function Qs(e){try{return e.map(t=>decodeURIComponent(escape(t)))}catch{return e}}function cr(e){return e instanceof Array?e.join(", "):e}const lr="Exif IFD Pointer",fr="GPS Info IFD Pointer",dr="Interoperability IFD Pointer",oi={read:Vs};function Vs(e,t,n){const r=L.getByteOrder(e,t);let i=eu(e,t,r,n);return i=tu(i,e,t,r,n),i=nu(i,e,t,r,n),i=ru(i,e,t,r,n),{tags:i,byteOrder:r}}function eu(e,t,n,r){return Z(e,rt,t,ii(e,t,n),n,r)}function tu(e,t,n,r,i){return e[lr]!==void 0?I(e,Z(t,Jr,n,n+e[lr].value,r,i)):e}function nu(e,t,n,r,i){return e[fr]!==void 0?I(e,Z(t,Qr,n,n+e[fr].value,r,i)):e}function ru(e,t,n,r,i){return e[dr]!==void 0?I(e,Z(t,Vr,n,n+e[dr].value,r,i)):e}const iu={read:ou},Q=16;function ou(e,t,n){const r=L.getByteOrder(e,t),i=Z(e,ei,t,ii(e,t,r),r,n);return su(e,t,i,r)}function su(e,t,n,r){if(!n.MPEntry)return n;const i=[];for(let s=0;s<Math.ceil(n.MPEntry.value.length/Q);s++){i[s]={};const o=ie(n.MPEntry.value,s*Q,d.getTypeSize("LONG"),r);i[s].ImageFlags=uu(o),i[s].ImageFormat=au(o),i[s].ImageType=cu(o);const u=ie(n.MPEntry.value,s*Q+4,d.getTypeSize("LONG"),r);i[s].ImageSize={value:u,description:""+u};const l=lu(s,n.MPEntry,r,t);i[s].ImageOffset={value:l,description:""+l};const a=ie(n.MPEntry.value,s*Q+12,d.getTypeSize("SHORT"),r);i[s].DependentImage1EntryNumber={value:a,description:""+a};const c=ie(n.MPEntry.value,s*Q+14,d.getTypeSize("SHORT"),r);i[s].DependentImage2EntryNumber={value:c,description:""+c},i[s].image=e.buffer.slice(l,l+u),Dr(i[s],"base64",function(){return Ur(this.image)})}return n.Images=i,n}function ie(e,t,n,r){if(r===L.LITTLE_ENDIAN){let s=0;for(let o=0;o<n;o++)s+=e[t+o]<<8*o;return s}let i=0;for(let s=0;s<n;s++)i+=e[t+s]<<8*(n-1-s);return i}function uu(e){const t=[e>>31&1,e>>30&1,e>>29&1],n=[];return t[0]&&n.push("Dependent Parent Image"),t[1]&&n.push("Dependent Child Image"),t[2]&&n.push("Representative Image"),{value:t,description:n.join(", ")||"None"}}function au(e){const t=e>>24&7;return{value:t,description:t===0?"JPEG":"Unknown"}}function cu(e){const t=e&16777215;return{value:t,description:{196608:"Baseline MP Primary Image",65537:"Large Thumbnail (VGA equivalent)",65538:"Large Thumbnail (Full HD equivalent)",131073:"Multi-Frame Image (Panorama)",131074:"Multi-Frame Image (Disparity)",131075:"Multi-Frame Image (Multi-Angle)",0:"Undefined"}[t]||"Unknown"}}function lu(e,t,n,r){return fu(e)?0:ie(t.value,e*Q+8,d.getTypeSize("LONG"),n)+r}function fu(e){return e===0}const du={read:pu};function pu(e,t){const n=gu(e,t),r=Eu(e,t,n);return{"Bits Per Sample":mu(e,t,n),"Image Height":hu(e,t,n),"Image Width":Su(e,t,n),"Color Components":r,Subsampling:r&&Iu(e,t,r.value,n)}}function gu(e,t){return d.getShortAt(e,t)}function mu(e,t,n){if(3>n)return;const s=d.getByteAt(e,t+2);return{value:s,description:""+s}}function hu(e,t,n){if(5>n)return;const s=d.getShortAt(e,t+3);return{value:s,description:`${s}px`}}function Su(e,t,n){if(7>n)return;const s=d.getShortAt(e,t+5);return{value:s,description:`${s}px`}}function Eu(e,t,n){if(8>n)return;const s=d.getByteAt(e,t+7);return{value:s,description:""+s}}function Iu(e,t,n,r){if(8+3*n>r)return;const o=[];for(let u=0;u<n;u++){const l=t+8+u*3;o.push([d.getByteAt(e,l),d.getByteAt(e,l+1),d.getByteAt(e,l+2)])}return{value:o,description:o.length>1?Tu(o)+xu(o):""}}function Tu(e){const t={1:"Y",2:"Cb",3:"Cr",4:"I",5:"Q"};return e.map(n=>t[n[0]]).join("")}function xu(e){const t={17:"4:4:4 (1 1)",18:"4:4:0 (1 2)",20:"4:4:1 (1 4)",33:"4:2:2 (2 1)",34:"4:2:0 (2 2)",36:"4:2:1 (2 4)",65:"4:1:1 (4 1)",66:"4:1:0 (4 2)"};return e.length===0||e[0][1]===void 0||t[e[0][1]]===void 0?"":t[e[0][1]]}const Fu={read:Au};function Au(e,t){const n=_u(e,t),r=Ru(e,t,n),i=Ou(e,t,n),s={"JFIF Version":Cu(e,t,n),"Resolution Unit":bu(e,t,n),XResolution:yu(e,t,n),YResolution:Nu(e,t,n),"JFIF Thumbnail Width":r,"JFIF Thumbnail Height":i};if(r!==void 0&&i!==void 0){const o=vu(e,t,3*r.value*i.value,n);o&&(s["JFIF Thumbnail"]=o)}for(const o in s)s[o]===void 0&&delete s[o];return s}function _u(e,t){return d.getShortAt(e,t)}function Cu(e,t,n){if(9>n)return;const s=d.getByteAt(e,t+7),o=d.getByteAt(e,t+7+1);return{value:s*256+o,description:s+"."+o}}function bu(e,t,n){if(10>n)return;const s=d.getByteAt(e,t+9);return{value:s,description:Pu(s)}}function Pu(e){return e===0?"None":e===1?"inches":e===2?"cm":"Unknown"}function yu(e,t,n){if(12>n)return;const s=d.getShortAt(e,t+10);return{value:s,description:""+s}}function Nu(e,t,n){if(14>n)return;const s=d.getShortAt(e,t+12);return{value:s,description:""+s}}function Ru(e,t,n){if(15>n)return;const s=d.getByteAt(e,t+14);return{value:s,description:`${s}px`}}function Ou(e,t,n){if(16>n)return;const s=d.getByteAt(e,t+15);return{value:s,description:`${s}px`}}function vu(e,t,n,r){return n===0||16+n>r?void 0:{value:e.buffer.slice(t+16,t+16+n),description:"<24-bit RGB pixel data>"}}const $={iptc:{256:{name:"Model Version",description:e=>((e[0]<<8)+e[1]).toString()},261:{name:"Destination",repeatable:!0},276:{name:"File Format",description:e=>((e[0]<<8)+e[1]).toString()},278:{name:"File Format Version",description:e=>((e[0]<<8)+e[1]).toString()},286:"Service Identifier",296:"Envelope Number",306:"Product ID",316:"Envelope Priority",326:{name:"Date Sent",description:Ne},336:{name:"Time Sent",description:Re},346:{name:"Coded Character Set",description:pr,encoding_name:pr},356:"UNO",376:{name:"ARM Identifier",description:e=>((e[0]<<8)+e[1]).toString()},378:{name:"ARM Version",description:e=>((e[0]<<8)+e[1]).toString()},512:{name:"Record Version",description:e=>((e[0]<<8)+e[1]).toString()},515:"Object Type Reference",516:"Object Attribute Reference",517:"Object Name",519:"Edit Status",520:{name:"Editorial Update",description:e=>A(e)==="01"?"Additional Language":"Unknown"},522:"Urgency",524:{name:"Subject Reference",repeatable:!0,description:e=>{const t=A(e).split(":");return t[2]+(t[3]?"/"+t[3]:"")+(t[4]?"/"+t[4]:"")}},527:"Category",532:{name:"Supplemental Category",repeatable:!0},534:"Fixture Identifier",537:{name:"Keywords",repeatable:!0},538:{name:"Content Location Code",repeatable:!0},539:{name:"Content Location Name",repeatable:!0},542:"Release Date",547:"Release Time",549:"Expiration Date",550:"Expiration Time",552:"Special Instructions",554:{name:"Action Advised",description:e=>{const t=A(e);return t==="01"?"Object Kill":t==="02"?"Object Replace":t==="03"?"Object Append":t==="04"?"Object Reference":"Unknown"}},557:{name:"Reference Service",repeatable:!0},559:{name:"Reference Date",repeatable:!0},562:{name:"Reference Number",repeatable:!0},567:{name:"Date Created",description:Ne},572:{name:"Time Created",description:Re},574:{name:"Digital Creation Date",description:Ne},575:{name:"Digital Creation Time",description:Re},577:"Originating Program",582:"Program Version",587:{name:"Object Cycle",description:e=>{const t=A(e);return t==="a"?"morning":t==="p"?"evening":t==="b"?"both":"Unknown"}},592:{name:"By-line",repeatable:!0},597:{name:"By-line Title",repeatable:!0},602:"City",604:"Sub-location",607:"Province/State",612:"Country/Primary Location Code",613:"Country/Primary Location Name",615:"Original Transmission Reference",617:"Headline",622:"Credit",627:"Source",628:"Copyright Notice",630:{name:"Contact",repeatable:!0},632:"Caption/Abstract",634:{name:"Writer/Editor",repeatable:!0},637:{name:"Rasterized Caption",description:e=>e},642:"Image Type",643:{name:"Image Orientation",description:e=>{const t=A(e);return t==="P"?"Portrait":t==="L"?"Landscape":t==="S"?"Square":"Unknown"}},647:"Language Identifier",662:{name:"Audio Type",description:e=>{const t=A(e),n=t.charAt(0),r=t.charAt(1);let i="";return n==="1"?i+="Mono":n==="2"&&(i+="Stereo"),r==="A"?i+=", actuality":r==="C"?i+=", question and answer session":r==="M"?i+=", music, transmitted by itself":r==="Q"?i+=", response to a question":r==="R"?i+=", raw sound":r==="S"?i+=", scener":r==="V"?i+=", voicer":r==="W"&&(i+=", wrap"),i!==""?i:t}},663:{name:"Audio Sampling Rate",description:e=>parseInt(A(e),10)+" Hz"},664:{name:"Audio Sampling Resolution",description:e=>{const t=parseInt(A(e),10);return t+(t===1?" bit":" bits")}},665:{name:"Audio Duration",description:e=>{const t=A(e);return t.length>=6?t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2):t}},666:"Audio Outcue",698:"Short Document ID",699:"Unique Document ID",700:"Owner ID",712:{name:e=>e.length===2?"ObjectData Preview File Format":"Record 2 destination",description:e=>{if(e.length===2){const t=(e[0]<<8)+e[1];return t===0?"No ObjectData":t===1?"IPTC-NAA Digital Newsphoto Parameter Record":t===2?"IPTC7901 Recommended Message Format":t===3?"Tagged Image File Format (Adobe/Aldus Image data)":t===4?"Illustrator (Adobe Graphics data)":t===5?"AppleSingle (Apple Computer Inc)":t===6?"NAA 89-3 (ANPA 1312)":t===7?"MacBinary II":t===8?"IPTC Unstructured Character Oriented File Format (UCOFF)":t===9?"United Press International ANPA 1312 variant":t===10?"United Press International Down-Load Message":t===11?"JPEG File Interchange (JFIF)":t===12?"Photo-CD Image-Pac (Eastman Kodak)":t===13?"Microsoft Bit Mapped Graphics File [*.BMP]":t===14?"Digital Audio File [*.WAV] (Microsoft & Creative Labs)":t===15?"Audio plus Moving Video [*.AVI] (Microsoft)":t===16?"PC DOS/Windows Executable Files [*.COM][*.EXE]":t===17?"Compressed Binary File [*.ZIP] (PKWare Inc)":t===18?"Audio Interchange File Format AIFF (Apple Computer Inc)":t===19?"RIFF Wave (Microsoft Corporation)":t===20?"Freehand (Macromedia/Aldus)":t===21?'Hypertext Markup Language "HTML" (The Internet Society)':t===22?"MPEG 2 Audio Layer 2 (Musicom), ISO/IEC":t===23?"MPEG 2 Audio Layer 3, ISO/IEC":t===24?"Portable Document File (*.PDF) Adobe":t===25?"News Industry Text Format (NITF)":t===26?"Tape Archive (*.TAR)":t===27?"Tidningarnas Telegrambyrå NITF version (TTNITF DTD)":t===28?"Ritzaus Bureau NITF version (RBNITF DTD)":t===29?"Corel Draw [*.CDR]":`Unknown format ${t}`}return A(e)}},713:{name:"ObjectData Preview File Format Version",description:(e,t)=>{const n={"00":{"00":"1"},"01":{"01":"1","02":"2","03":"3","04":"4"},"02":{"04":"4"},"03":{"01":"5.0","02":"6.0"},"04":{"01":"1.40"},"05":{"01":"2"},"06":{"01":"1"},11:{"01":"1.02"},20:{"01":"3.1","02":"4.0","03":"5.0","04":"5.5"},21:{"02":"2.0"}},r=A(e);if(t["ObjectData Preview File Format"]){const i=A(t["ObjectData Preview File Format"].value);if(n[i]&&n[i][r])return n[i][r]}return r}},714:"ObjectData Preview Data",1802:{name:"Size Mode",description:e=>e[0].toString()},1812:{name:"Max Subfile Size",description:e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}},1882:{name:"ObjectData Size Announced",description:e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}},1887:{name:"Maximum ObjectData Size",description:e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}}}};function Ne(e){const t=A(e);return t.length>=8?t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2):t}function Re(e){const t=A(e);let n=t;return t.length>=6&&(n=t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2),t.length===11&&(n+=t.substr(6,1)+t.substr(7,2)+":"+t.substr(9,2))),n}function pr(e){const t=A(e);return t==="\x1B%G"?"UTF-8":t==="\x1B%5"?"Windows-1252":t==="\x1B%/G"?"UTF-8 Level 1":t==="\x1B%/H"?"UTF-8 Level 2":t==="\x1B%/I"?"UTF-8 Level 3":t==="\x1B/A"?"ISO-8859-1":t==="\x1B/B"?"ISO-8859-2":t==="\x1B/C"?"ISO-8859-3":t==="\x1B/D"?"ISO-8859-4":t==="\x1B/@"?"ISO-8859-5":t==="\x1B/G"?"ISO-8859-6":t==="\x1B/F"?"ISO-8859-7":t==="\x1B/H"?"ISO-8859-8":"Unknown"}const Lu={get:Du};function Du(){if(typeof TextDecoder<"u")return TextDecoder}const Uu=5,si={decode:Mu,TAG_HEADER_SIZE:Uu};function Mu(e,t){const n=Lu.get();if(typeof n<"u"&&e!==void 0)try{return new n(e).decode(t instanceof DataView?t.buffer:Uint8Array.from(t))}catch{}const r=t.map(i=>String.fromCharCode(i)).join("");return Gu(r)}function Gu(e){try{return decodeURIComponent(escape(e))}catch{return e}}const Bu=943868237,oe=4,me=2,ku=1,$u=2,ui=4,Hu=oe+me+$u+ui,Zu=1028,ai=5,Ye={read:wu};function wu(e,t,n){try{if(Array.isArray(e))return gr(new DataView(Uint8Array.from(e).buffer),{size:e.length},0,n);const{naaBlock:r,dataOffset:i}=Xu(e,t);return gr(e,r,i,n)}catch{return{}}}function Xu(e,t){for(;t+Hu<=e.byteLength;){const n=Yu(e,t);if(ju(n))return{naaBlock:n,dataOffset:t+n.headerSize};t+=n.headerSize+n.size+zu(n)}throw new Error("No IPTC NAA resource block.")}function Yu(e,t){if(e.getUint32(t,!1)!==Bu)throw new Error("Not an IPTC resource block.");const n=e.getUint8(t+oe+me),r=(n%2===0?n+1:n)+ku;return{headerSize:oe+me+r+ui,type:e.getUint16(t+oe),size:e.getUint32(t+oe+me+r)}}function ju(e){return e.type===Zu}function zu(e){return e.size%2!==0?1:0}function gr(e,t,n,r){const i={};let s;const o=n+t.size;for(;n<o&&n<e.byteLength;){const{tag:u,tagSize:l}=Ku(e,n,i,s,r);if(u===null)break;u&&("encoding"in u&&(s=u.encoding),i[u.name]===void 0||u.repeatable===void 0?i[u.name]={id:u.id,value:u.value,description:u.description}:(i[u.name]instanceof Array||(i[u.name]=[{id:i[u.name].id,value:i[u.name].value,description:i[u.name].description}]),i[u.name].push({id:u.id,value:u.value,description:u.description}))),n+=ai+l}return i}function Ku(e,t,n,r,i){if(Wu(e,t))return{tag:null,tagSize:0};const u=e.getUint16(t+1),l=e.getUint16(t+3);if(!i&&!$.iptc[u])return{tag:void 0,tagSize:l};const a=qu(e,t+ai,l),c={id:u,name:Ju($.iptc[u],u,a),value:a,description:ea($.iptc[u],a,n,r)};return ra(u)&&(c.repeatable=!0),ia(u)&&(c.encoding=$.iptc[u].encoding_name(a)),{tag:c,tagSize:l}}function Wu(e,t){return e.getUint8(t)!==28}function qu(e,t,n){const r=[];for(let i=0;i<n;i++)r.push(e.getUint8(t+i));return r}function Ju(e,t,n){return e?Qu(e)?e:Vu(e)?e.name(n):e.name:`undefined-${t}`}function Qu(e){return typeof e=="string"}function Vu(e){return typeof e.name=="function"}function ea(e,t,n,r){if(na(e))try{return e.description(t,n)}catch{}return ta(e,t)?si.decode(r,t):t}function ta(e,t){return e&&t instanceof Array}function na(e){return e&&e.description!==void 0}function ra(e){return $.iptc[e]&&$.iptc[e].repeatable}function ia(e){return $.iptc[e]&&$.iptc[e].encoding_name!==void 0}const ce={"tiff:Orientation"(e){return e==="1"?"Horizontal (normal)":e==="2"?"Mirror horizontal":e==="3"?"Rotate 180":e==="4"?"Mirror vertical":e==="5"?"Mirror horizontal and rotate 270 CW":e==="6"?"Rotate 90 CW":e==="7"?"Mirror horizontal and rotate 90 CW":e==="8"?"Rotate 270 CW":e},"tiff:ResolutionUnit":e=>S.ResolutionUnit(parseInt(e,10)),"tiff:XResolution":e=>K(S.XResolution,e),"tiff:YResolution":e=>K(S.YResolution,e),"exif:ApertureValue":e=>K(S.ApertureValue,e),"exif:GPSLatitude":mr,"exif:GPSLongitude":mr,"exif:FNumber":e=>K(S.FNumber,e),"exif:FocalLength":e=>K(S.FocalLength,e),"exif:FocalPlaneResolutionUnit":e=>S.FocalPlaneResolutionUnit(parseInt(e,10)),"exif:ColorSpace":e=>S.ColorSpace(oa(e)),"exif:ComponentsConfiguration"(e,t){if(/^\d, \d, \d, \d$/.test(t)){const n=t.split(", ").map(r=>r.charCodeAt(0));return S.ComponentsConfiguration(n)}return t},"exif:Contrast":e=>S.Contrast(parseInt(e,10)),"exif:CustomRendered":e=>S.CustomRendered(parseInt(e,10)),"exif:ExposureMode":e=>S.ExposureMode(parseInt(e,10)),"exif:ExposureProgram":e=>S.ExposureProgram(parseInt(e,10)),"exif:ExposureTime"(e){return ci(e)?S.ExposureTime(e.split("/").map(t=>parseInt(t,10))):e},"exif:MeteringMode":e=>S.MeteringMode(parseInt(e,10)),"exif:Saturation":e=>S.Saturation(parseInt(e,10)),"exif:SceneCaptureType":e=>S.SceneCaptureType(parseInt(e,10)),"exif:Sharpness":e=>S.Sharpness(parseInt(e,10)),"exif:ShutterSpeedValue":e=>K(S.ShutterSpeedValue,e),"exif:WhiteBalance":e=>S.WhiteBalance(parseInt(e,10))};function K(e,t){return ci(t)?e(t.split("/")):t}function oa(e){return e.substring(0,2)==="0x"?parseInt(e.substring(2),16):parseInt(e,10)}function ci(e){return/^-?\d+\/-?\d+$/.test(e)}function mr(e){const[t,n]=e.split(",");if(t!==void 0&&n!==void 0){const r=parseFloat(t),i=parseFloat(n),s=n.charAt(n.length-1);if(!Number.isNaN(r)&&!Number.isNaN(i))return""+(r+i/60)+s}return e}const sa={get:ua};function ua(e){if(e)return e;if(typeof DOMParser<"u")return new DOMParser;try{const{DOMParser:t,onErrorStopParsing:n}=__non_webpack_require__("@xmldom/xmldom");return new t({onError:n})}catch{return}}function aa(e){const t=["prefix is non-null and namespace is null","prefix not bound to a namespace","prefix inte bundet till en namnrymd",/Namespace prefix .+ is not defined/];for(let n=0;n<t.length;n++)if(new RegExp(t[n]).test(e.message))return!0;return!1}function ca(e){const t=e.match(/<([A-Za-z_][A-Za-z0-9._-]*)([^>]*)>/);if(!t)return e;const n=t[1],r=la(e),s=fa(e).filter(u=>r.indexOf(u)===-1);if(s.length===0)return e;const o=pa(s);return ga(e,n,o)}function la(e){const t=[],n=/xmlns:([\w-]+)=["'][^"']+["']/g;let r;for(;(r=n.exec(e))!==null;)t.indexOf(r[1])===-1&&t.push(r[1]);return t}function fa(e){const t=[],n=/\b([A-Za-z_][A-Za-z0-9._-]*):[A-Za-z_][A-Za-z0-9._-]*\b/g;let r;for(;(r=n.exec(e))!==null;){const i=r[1];i==="xmlns"||i==="xml"||t.indexOf(i)===-1&&t.push(i)}return t}const da={xmp:"http://ns.adobe.com/xap/1.0/",tiff:"http://ns.adobe.com/tiff/1.0/",exif:"http://ns.adobe.com/exif/1.0/",dc:"http://purl.org/dc/elements/1.1/",xmpMM:"http://ns.adobe.com/xap/1.0/mm/",stEvt:"http://ns.adobe.com/xap/1.0/sType/ResourceEvent#",stRef:"http://ns.adobe.com/xap/1.0/sType/ResourceRef#",photoshop:"http://ns.adobe.com/photoshop/1.0/"};function pa(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n],i=da[r]||"http://fallback.namespace/"+r;t.push(" xmlns:"+r+'="'+i+'"')}return t.join("")}function ga(e,t,n){const r=new RegExp("<"+t+"([^>]*)>");return e.replace(r,"<"+t+"$1"+n+">")}const hr={read:ha};class ma extends Error{constructor(t){super(t),this.name="ParseError"}}function ha(e,t,n){const r={};if(typeof e=="string")return le(r,e,n),r;const[i,s]=Sa(e,t),o=le(r,i,n);if(s){const u=le(r,s,n);!o&&!u&&(delete r._raw,le(r,je(e,t),n))}return r}function Sa(e,t){if(t.length===0)return[];const n=[je(e,t.slice(0,1))];return t.length>1&&n.push(je(e,t.slice(1))),n}function je(e,t){const n=t.reduce((s,o)=>s+o.length,0),r=new Uint8Array(n);let i=0;for(let s=0;s<t.length;s++){const o=t[s],u=e.buffer.slice(o.dataOffset,o.dataOffset+o.length);r.set(new Uint8Array(u),i),i+=o.length}return new DataView(r.buffer)}function le(e,t,n){try{const{doc:r,raw:i}=Ea(t,n);e._raw=(e._raw||"")+i;const s=fi(r);return I(e,pi(di(s,!0))),!0}catch{return!1}}function Ea(e,t){const n=sa.get(t);if(!n)throw console.warn("Warning: DOMParser is not available. It is needed to be able to parse XMP tags."),new Error;const r=typeof e=="string"?e:E(e,0,e.byteLength);return{doc:li(n,Ia(r)),raw:r}}function Ia(e){return e.replace(/^.+(<\?xpacket begin)/,"$1").replace(/(<\?xpacket end=".*"\?>).+$/,"$1")}function li(e,t,n=!1){try{const r=e.parseFromString(t,"application/xml"),i=r.getElementsByTagName("parsererror");if(i.length>0)throw new ma(i[0].textContent);return r}catch(r){if(r.name==="ParseError"&&aa(r)&&!n)return li(e,ca(t),!0);throw r}}function fi(e){for(let t=0;t<e.childNodes.length;t++){if(e.childNodes[t].tagName==="x:xmpmeta")return fi(e.childNodes[t]);if(e.childNodes[t].tagName==="rdf:RDF")return e.childNodes[t]}throw new Error}function di(e,t=!1){const n=Ta(e);return xa(n)?t?{}:Fa(n[0]):Aa(n)}function Ta(e){const t=[];for(let n=0;n<e.childNodes.length;n++)t.push(e.childNodes[n]);return t}function xa(e){return e.length===1&&e[0].nodeName==="#text"}function Fa(e){return e.nodeValue}function Aa(e){const t={};return e.forEach(n=>{if(_a(n)){const r=Ca(n);t[n.nodeName]!==void 0?(Array.isArray(t[n.nodeName])||(t[n.nodeName]=[t[n.nodeName]]),t[n.nodeName].push(r)):t[n.nodeName]=r}}),t}function _a(e){return e.nodeName&&e.nodeName!=="#text"}function Ca(e){return{attributes:ba(e),value:di(e)}}function ba(e){const t={};for(let n=0;n<e.attributes.length;n++)t[e.attributes[n].nodeName]=decodeURIComponent(escape(e.attributes[n].value));return t}function pi(e){const t={};if(typeof e=="string")return e;for(const n in e){let r=e[n];Array.isArray(r)||(r=[r]),r.forEach(i=>{I(t,ot(i.attributes)),typeof i.value=="object"&&I(t,gi(i.value))})}return t}function ot(e){const t={};for(const n in e)try{Pa(n)&&(t[Pe(n)]={value:e[n],attributes:{},description:U(e[n],n)})}catch{}return t}function Pa(e){return e!=="rdf:parseType"&&!be(e)}function be(e){return e.split(":")[0]==="xmlns"}function Pe(e){return/^MicrosoftPhoto(_\d+_)?:Rating$/i.test(e)?"RatingPercent":e.split(":")[1]}function U(e,t=void 0){if(Array.isArray(e)){const n=ya(e);return t&&typeof ce[t]=="function"?ce[t](e,n):n}if(typeof e=="object")return Na(e);try{return t&&typeof ce[t]=="function"?ce[t](e):decodeURIComponent(escape(e))}catch{return e}}function ya(e){return e.map(t=>t.value!==void 0?U(t.value):U(t)).join(", ")}function Na(e){const t=[];for(const n in e)t.push(`${Ra(n)}: ${U(e[n].value)}`);return t.join("; ")}function Ra(e){return e==="CiAdrCity"?"CreatorCity":e==="CiAdrCtry"?"CreatorCountry":e==="CiAdrExtadr"?"CreatorAddress":e==="CiAdrPcode"?"CreatorPostalCode":e==="CiAdrRegion"?"CreatorRegion":e==="CiEmailWork"?"CreatorWorkEmail":e==="CiTelWork"?"CreatorWorkPhone":e==="CiUrlWork"?"CreatorWorkUrl":e}function gi(e){const t={};for(const n in e)try{be(n)||(t[Pe(n)]=Oa(e[n],n))}catch{}return t}function Oa(e,t){return La(e)?Da(e,t):va(e)?{value:"",attributes:{},description:""}:mi(e)?hi(e,t):Si(e)?Ei(e,t):Ii(e)?Ti(e,t):Ga(e)?Ba(e,t):st(e,t)}function va(e){return e.attributes["rdf:parseType"]==="Resource"&&typeof e.value=="string"&&e.value.trim()===""}function La(e){return Array.isArray(e)}function Da(e,t){return st(e[e.length-1],t)}function mi(e){return e.attributes["rdf:parseType"]==="Resource"&&e.value["rdf:value"]!==void 0||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]!==void 0}function hi(e,t){const n=se(e);e.value["rdf:Description"]!==void 0&&(e=e.value["rdf:Description"]),I(n,se(e),Ua(e));const r=Ma(e);return{value:r,attributes:n,description:U(r,t)}}function se(e){const t={};for(const n in e.attributes)n!=="rdf:parseType"&&n!=="rdf:resource"&&!be(n)&&(t[Pe(n)]=e.attributes[n]);return t}function Ua(e){const t={};for(const n in e.value)n!=="rdf:value"&&!be(n)&&(t[Pe(n)]=e.value[n].value);return t}function Ma(e){return Fi(e.value["rdf:value"])||e.value["rdf:value"].value}function Si(e){return e.attributes["rdf:parseType"]==="Resource"||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]===void 0}function Ei(e,t){const n={value:{},attributes:{}};return e.value["rdf:Description"]!==void 0&&(I(n.value,ot(e.value["rdf:Description"].attributes)),I(n.attributes,se(e)),e=e.value["rdf:Description"]),I(n.value,gi(e.value)),n.description=U(n.value,t),n}function Ii(e){return Object.keys(e.value).length===0&&e.attributes["xml:lang"]===void 0&&e.attributes["rdf:resource"]===void 0}function Ti(e,t){const n=ot(e.attributes);return{value:n,attributes:{},description:U(n,t)}}function Ga(e){return xi(e.value)!==void 0}function xi(e){return e["rdf:Bag"]||e["rdf:Seq"]||e["rdf:Alt"]}function Ba(e,t){let n=xi(e.value).value["rdf:li"];const r=se(e),i=[];return n===void 0?n=[]:Array.isArray(n)||(n=[n]),n.forEach(s=>{i.push(ka(s))}),{value:i,attributes:r,description:U(i,t)}}function ka(e){return mi(e)?hi(e):Si(e)?Ei(e).value:Ii(e)?Ti(e).value:st(e)}function st(e,t){const n=Fi(e)||pi(e.value);return{value:n,attributes:se(e),description:U(n,t)}}function Fi(e){return e.attributes&&e.attributes["rdf:resource"]}const D={CLOSED_SUBPATH_LENGTH:0,CLOSED_SUBPATH_BEZIER_LINKED:1,CLOSED_SUBPATH_BEZIER_UNLINKED:2,OPEN_SUBPATH_LENGTH:3,OPEN_SUBPATH_BEZIER_LINKED:4,OPEN_SUBPATH_BEZIER_UNLINKED:5,FILL_RULE:6,CLIPBOARD:7,INITIAL_FILL_RULE:8},Ai=24,Oe={2e3:{name:"PathInformation",description:$a},2999:{name:"ClippingPathName",description(e){const[,t]=Lr(e,0);return t}}};function $a(e){const n={},r=[];for(let i=0;i<e.byteLength;i+=2+Ai){const s=d.getShortAt(e,i);ve[s]&&(n[s]||(n[s]=ve[s].description),r.push({type:s,path:ve[s].path(e,i+2)}))}return JSON.stringify({types:n,paths:r})}const ve={[D.CLOSED_SUBPATH_LENGTH]:{description:"Closed subpath length",path:(e,t)=>[d.getShortAt(e,t)]},[D.CLOSED_SUBPATH_BEZIER_LINKED]:{description:"Closed subpath Bezier knot, linked",path:fe},[D.CLOSED_SUBPATH_BEZIER_UNLINKED]:{description:"Closed subpath Bezier knot, unlinked",path:fe},[D.OPEN_SUBPATH_LENGTH]:{description:"Open subpath length",path:(e,t)=>[d.getShortAt(e,t)]},[D.OPEN_SUBPATH_BEZIER_LINKED]:{description:"Open subpath Bezier knot, linked",path:fe},[D.OPEN_SUBPATH_BEZIER_UNLINKED]:{description:"Open subpath Bezier knot, unlinked",path:fe},[D.FILL_RULE]:{description:"Path fill rule",path:()=>[]},[D.INITIAL_FILL_RULE]:{description:"Initial fill rule",path:(e,t)=>[d.getShortAt(e,t)]},[D.CLIPBOARD]:{description:"Clipboard",path:Za}};function fe(e,t){const r=[];for(let i=0;i<Ai;i+=8)r.push(Ha(e,t+i));return r}function Ha(e,t){const n=Y(e,t,8);return[Y(e,t+4,8),n]}function Za(e,t){return[[Y(e,t,8),Y(e,t+4,8),Y(e,t+8,8),Y(e,t+12,8)],Y(e,t+16,8)]}function Y(e,t,n){const r=d.getLongAt(e,t),i=r>>>31?-1:1,s=(r&2130706432)>>>32-n,o=r&parseInt(Mr("1",32-n),2);return i*ki(s.toString(2)+"."+Bi(o.toString(2),32-n,"0"),2)}const wa={read:ja},_i="8BIM",Xa=2,Ya=4,Sr=_i.length;function ja(e,t){const n=$n(new Uint8Array(e).buffer),r={};let i=0;for(;i<e.length;){const s=E(n,i,Sr);i+=Sr;const o=d.getShortAt(n,i);i+=Xa;const{tagName:u,tagNameSize:l}=za(n,i);i+=l;const a=d.getLongAt(n,i);if(i+=Ya,s===_i){const c=$n(n.buffer,i,a),f={id:o,value:E(c,0,a)};if(Oe[o]){try{f.description=Oe[o].description(c)}catch{f.description="<no description formatter>"}r[u||Oe[o].name]=f}else t&&(r[`undefined-${o}`]=f)}i+=a+a%2}return r}function za(e,t){const[n,r]=Lr(e,t);return{tagName:r,tagNameSize:1+n+(n%2===0?1:0)}}const Er={desc:{name:"ICC Description"},cprt:{name:"ICC Copyright"},dmdd:{name:"ICC Device Model Description"},vued:{name:"ICC Viewing Conditions Description"},dmnd:{name:"ICC Device Manufacturer for Display"},tech:{name:"Technology"}},Ir={4:{name:"Preferred CMM type",value:(e,t)=>E(e,t,4),description:e=>e!==null?Le(e):""},8:{name:"Profile Version",value:(e,t)=>e.getUint8(t).toString(10)+"."+(e.getUint8(t+1)>>4).toString(10)+"."+(e.getUint8(t+1)%16).toString(10)},12:{name:"Profile/Device class",value:(e,t)=>E(e,t,4),description:e=>{switch(e.toLowerCase()){case"scnr":return"Input Device profile";case"mntr":return"Display Device profile";case"prtr":return"Output Device profile";case"link":return"DeviceLink profile";case"abst":return"Abstract profile";case"spac":return"ColorSpace profile";case"nmcl":return"NamedColor profile";case"cenc":return"ColorEncodingSpace profile";case"mid ":return"MultiplexIdentification profile";case"mlnk":return"MultiplexLink profile";case"mvis":return"MultiplexVisualization profile";default:return e}}},16:{name:"Color Space",value:(e,t)=>E(e,t,4)},20:{name:"Connection Space",value:(e,t)=>E(e,t,4)},24:{name:"ICC Profile Date",value:(e,t)=>Ka(e,t).toISOString()},36:{name:"ICC Signature",value:(e,t)=>Wa(e.buffer.slice(t,t+4))},40:{name:"Primary Platform",value:(e,t)=>E(e,t,4),description:e=>Le(e)},48:{name:"Device Manufacturer",value:(e,t)=>E(e,t,4),description:e=>Le(e)},52:{name:"Device Model Number",value:(e,t)=>E(e,t,4)},64:{name:"Rendering Intent",value:(e,t)=>e.getUint32(t),description:e=>{switch(e){case 0:return"Perceptual";case 1:return"Relative Colorimetric";case 2:return"Saturation";case 3:return"Absolute Colorimetric";default:return e}}},80:{name:"Profile Creator",value:(e,t)=>E(e,t,4)}};function Ka(e,t){const n=e.getUint16(t),r=e.getUint16(t+2)-1,i=e.getUint16(t+4),s=e.getUint16(t+6),o=e.getUint16(t+8),u=e.getUint16(t+10);return new Date(Date.UTC(n,r,i,s,o,u))}function Wa(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function Le(e){switch(e.toLowerCase()){case"appl":return"Apple";case"adbe":return"Adobe";case"msft":return"Microsoft";case"sunw":return"Sun Microsystems";case"sgi":return"Silicon Graphics";case"tgnt":return"Taligent";default:return e}}const Tr={read:ic},qa=84,Ja=128,Qa="acsp",Va="desc",ec="mluc",tc="text",nc="sig ",rc=12;function ic(e,t,n){return n&&t[0].compressionMethod!==Ie?oc(e,t):uc(e,t)}function oc(e,t){if(!sc(t[0].compressionMethod))return{};const n=new DataView(e.buffer.slice(t[0].offset,t[0].offset+t[0].length));return Br(n,t[0].compressionMethod,"utf-8","dataview").then(Ci).catch(()=>({}))}function sc(e){return e===Gr}function uc(e,t){try{const n=t.reduce((o,u)=>o+u.length,0),r=new Uint8Array(n);let i=0;const s=ac(e);for(let o=1;o<=t.length;o++){const u=t.find(c=>c.chunkNumber===o);if(!u)throw new Error(`ICC chunk ${o} not found`);const l=s.slice(u.offset,u.offset+u.length),a=new Uint8Array(l);r.set(a,i),i+=a.length}return Ci(new DataView(r.buffer))}catch{return{}}}function ac(e){return Array.isArray(e)?new DataView(Uint8Array.from(e).buffer).buffer:e.buffer}function cc(e){return e.length<Ja+4}function lc(e,t){return e.length<t+rc}function Ci(e){const t=e.buffer,n=e.getUint32();if(e.byteLength!==n)throw new Error("ICC profile length not matching");if(e.length<qa)throw new Error("ICC profile too short");const r={},i=Object.keys(Ir);for(let l=0;l<i.length;l++){const a=i[l],c=Ir[a],f=c.value(e,parseInt(a,10));let g=f;c.description&&(g=c.description(f)),r[c.name]={value:f,description:g}}if(de(t.slice(36,40))!==Qa)throw new Error("ICC profile: missing signature");if(cc(t))return r;const o=e.getUint32(128);let u=132;for(let l=0;l<o;l++){if(lc(t,u))return r;const a=E(e,u,4),c=e.getUint32(u+4),f=e.getUint32(u+8);if(c>t.length)return r;const g=E(e,c,4);if(g===Va){const m=e.getUint32(c+8);if(m>f)return r;const x=de(t.slice(c+12,c+m+11));re(r,a,x)}else if(g===ec){const m=e.getUint32(c+8),x=e.getUint32(c+12);let _=c+16;const F=[];for(let C=0;C<m;C++){const b=E(e,_+0,2),N=E(e,_+2,2),w=e.getUint32(_+4),G=e.getUint32(_+8),X=Mi(e,c+G,w);F.push({languageCode:b,countryCode:N,text:X}),_+=x}if(m===1)re(r,a,F[0].text);else{const C={};for(let b=0;b<F.length;b++)C[`${F[b].languageCode}-${F[b].countryCode}`]=F[b].text;re(r,a,C)}}else if(g===tc){const m=de(t.slice(c+8,c+f-7));re(r,a,m)}else if(g===nc){const m=de(t.slice(c+8,c+12));re(r,a,m)}u=u+12}return r}function de(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function re(e,t,n){Er[t]?e[Er[t].name]={value:n,description:n}:e[t]={value:n,description:n}}const he=27,fc={read:dc,SHOT_INFO_AUTO_ROTATE:he};function dc(e,t,n,r,i){let s=Z(e,ti,t,t+n,r,i);return s.ShotInfo&&(s=I({},s,pc(s.ShotInfo.value)),delete s.ShotInfo),s}function pc(e){const t={};return e[he]!==void 0&&(t.AutoRotate={value:e[he],description:gc(e[he])}),t}function gc(e){return e===0?"None":e===1?"Rotate 90 CW":e===2?"Rotate 180":e===3?"Rotate 270 CW":"Unknown"}const bi=8,Pi=bi+2,yi={K3_III:78420},Se={CAMERA_ORIENTATION:1,ROLL_ANGLE:3,PITCH_ANGLE:5},mc={read:hc,PENTAX_IFD_OFFSET:Pi,MODEL_ID:yi,LIK3III:Se};function hc(e,t,n,r){const i=L.getByteOrder(e,t+n+bi),s=t+n;let o=Z(e,it,s,s+Pi,i,r);return Sc(o)&&(o=I({},o,Ec(e,s+o.LevelInfo.__offset,i)),delete o.LevelInfo),o}function Sc(e){return e.PentaxModelID&&e.PentaxModelID.value===yi.K3_III&&e.LevelInfo}function Ec(e,t,n){const r={};if(t+7>e.byteLength)return r;const i=e.getInt8(t+Se.CAMERA_ORIENTATION);r.CameraOrientation={value:i,description:Ic(i)};const s=e.getInt16(t+Se.ROLL_ANGLE,n===L.LITTLE_ENDIAN);r.RollAngle={value:s,description:Tc(s)};const o=e.getInt16(t+Se.PITCH_ANGLE,n===L.LITTLE_ENDIAN);return r.PitchAngle={value:o,description:xc(o)},r}function Ic(e){return e===0?"Horizontal (normal)":e===1?"Rotate 270 CW":e===2?"Rotate 180":e===3?"Rotate 90 CW":e===4?"Upwards":e===5?"Downwards":"Unknown"}function Tc(e){return""+e*-.5}function xc(e){return""+e*-.5}const Fc={read:Ac};function Ac(e,t){return{"Image Width":_c(e,t),"Image Height":Cc(e,t),"Bit Depth":bc(e,t),"Color Type":Pc(e,t),Compression:yc(e,t),Filter:Nc(e,t),Interlace:Rc(e,t)}}function _c(e,t){if(t+0+4>e.byteLength)return;const i=d.getLongAt(e,t);return{value:i,description:`${i}px`}}function Cc(e,t){if(t+4+4>e.byteLength)return;const i=d.getLongAt(e,t+4);return{value:i,description:`${i}px`}}function bc(e,t){if(t+8+1>e.byteLength)return;const i=d.getByteAt(e,t+8);return{value:i,description:`${i}`}}function Pc(e,t){const i={0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha"};if(t+9+1>e.byteLength)return;const s=d.getByteAt(e,t+9);return{value:s,description:i[s]||"Unknown"}}function yc(e,t){if(t+10+1>e.byteLength)return;const i=d.getByteAt(e,t+10);return{value:i,description:i===0?"Deflate/Inflate":"Unknown"}}function Nc(e,t){if(t+11+1>e.byteLength)return;const i=d.getByteAt(e,t+11);return{value:i,description:i===0?"Adaptive":"Unknown"}}function Rc(e,t){const i={0:"Noninterlaced",1:"Adam7 Interlace"};if(t+12+1>e.byteLength)return;const s=d.getByteAt(e,t+12);return{value:s,description:i[s]||"Unknown"}}const Oc={read:Mc},ze="STATE_KEYWORD",Ke="STATE_COMPRESSION",We="STATE_LANG",vc="STATE_TRANSLATED_KEYWORD",qe="STATE_TEXT",Lc=1,Dc=1,Uc=6;function Mc(e,t,n,r){const i={},s=[];for(let o=0;o<t.length;o++){const{offset:u,length:l,type:a}=t[o],c=Gc(e,u,l,a,n);if(c instanceof Promise)s.push(c.then(({name:f,value:g,description:m})=>{try{if(Hn.USE_EXIF&&Fr(f,g))return{__exif:oi.read(_r(g),Uc,r).tags};if(Hn.USE_IPTC&&Ar(f,g))return{__iptc:Ye.read(_r(g),0,r)};if(f&&!Fr(f,g)&&!Ar(f,g))return{[f]:{value:g,description:m}}}catch{}return{}}));else{const{name:f,value:g,description:m}=c;f&&(i[f]={value:g,description:m})}}return{readTags:i,readTagsPromise:s.length>0?Promise.all(s):void 0}}function Gc(e,t,n,r,i){const s=[],o=[];let u,l=ze,a=Ie;for(let f=0;f<n&&t+f<e.byteLength;f++){if(l===Ke){a=Bc({type:r,dataView:e,offset:t+f}),r===z&&(f+=Lc),l=xr(r,l);continue}else if(l===qe){u=new DataView(e.buffer.slice(t+f,t+n));break}const g=e.getUint8(t+f);g===0?l=xr(r,l):l===ze?s.push(g):l===We&&o.push(g)}if(a!==Ie&&!i)return{};const c=Br(u,a,kc(r));return c instanceof Promise?c.then(f=>De(f,r,o,s)).catch(()=>De("<text using unknown compression>".split(""),r,o,s)):De(c,r,o,s)}function Bc({type:e,dataView:t,offset:n}){if(e===z){if(t.getUint8(n)===Dc)return t.getUint8(n+1)}else if(e===Ae)return t.getUint8(n);return Ie}function xr(e,t){return t===ze&&[z,Ae].includes(e)?Ke:t===Ke?e===z?We:qe:t===We?vc:qe}function kc(e){return e===tt||e===Ae?"latin1":"utf-8"}function De(e,t,n,r){const i=Hc(e);return{name:$c(t,n,r),value:i,description:t===z?Zc(e):i}}function $c(e,t,n){const r=j(n);if(e===tt||t.length===0)return r;const i=j(t);return`${r} (${i})`}function Hc(e){return e instanceof DataView?E(e,0,e.byteLength):e}function Zc(e){return si.decode("UTF-8",e)}function Fr(e,t){return e.toLowerCase()==="raw profile type exif"&&t.substring(1,5)==="exif"}function Ar(e,t){return e.toLowerCase()==="raw profile type iptc"&&t.substring(1,5)==="iptc"}function _r(e){const t=e.match(/\n(exif|iptc)\n\s*\d+\n([\s\S]*)$/);return wc(t[2].replace(/\n/g,""))}function wc(e){const t=new DataView(new ArrayBuffer(e.length/2));for(let n=0;n<e.length;n+=2)t.setUint8(n/2,parseInt(e.substring(n,n+2),16));return t}const Xc={read:Yc};function Yc(e,t){const n={};for(let r=0;r<t.length;r++){const i=d.getLongAt(e,t[r]+J),s=E(e,t[r]+H,v);s===Xr?(n["Pixels Per Unit X"]=jc(e,t[r],i),n["Pixels Per Unit Y"]=zc(e,t[r],i),n["Pixel Units"]=Kc(e,t[r],i)):s===Yr&&(n["Modify Date"]=Wc(e,t[r],i))}return n}function jc(e,t,n){if(!ye(e,t,n,0,4))return;const s=d.getLongAt(e,t+P+0);return{value:s,description:""+s}}function zc(e,t,n){if(!ye(e,t,n,4,4))return;const s=d.getLongAt(e,t+P+4);return{value:s,description:""+s}}function Kc(e,t,n){if(!ye(e,t,n,8,1))return;const s=d.getByteAt(e,t+P+8);return{value:s,description:s===1?"meters":"Unknown"}}function Wc(e,t,n){if(!ye(e,t,n,0,7))return;const i=d.getShortAt(e,t+P),s=d.getByteAt(e,t+P+2),o=d.getByteAt(e,t+P+3),u=d.getByteAt(e,t+P+4),l=d.getByteAt(e,t+P+5),a=d.getByteAt(e,t+P+6);return{value:[i,s,o,u,l,a],description:`${W(i,4)}-${W(s,2)}-${W(o,2)} ${W(u,2)}:${W(l,2)}:${W(a,2)}`}}function ye(e,t,n,r,i){return r+i<=n&&t+P+r+i<=e.byteLength}function W(e,t){return`${"0".repeat(t-(""+e).length)}${e}`}const qc={read:Vc},Jc=4,Qc=7;function Vc(e,t){const n={},r=d.getByteAt(e,t);return n.Alpha=el(r),n.Animation=tl(r),n.ImageWidth=Cr(e,t+Jc),n.ImageHeight=Cr(e,t+Qc),n}function el(e){const t=e&16;return{value:t?1:0,description:t?"Yes":"No"}}function tl(e){const t=e&2;return{value:t?1:0,description:t?"Yes":"No"}}function Cr(e,t){const n=d.getByteAt(e,t)+256*d.getByteAt(e,t+1)+65536*d.getByteAt(e,t+2)+1;return{value:n,description:n+"px"}}const nl={read:rl};function rl(e){return{"GIF Version":il(e),"Image Width":ol(e),"Image Height":sl(e),"Global Color Map":ul(e),"Bits Per Pixel":cl(e),"Color Resolution Depth":al(e)}}function il(e){if(6>e.byteLength)return;const r=E(e,3,3);return{value:r,description:r}}function ol(e){if(8>e.byteLength)return;const r=e.getUint16(6,!0);return{value:r,description:`${r}px`}}function sl(e){if(10>e.byteLength)return;const r=e.getUint16(8,!0);return{value:r,description:`${r}px`}}function ul(e){if(11>e.byteLength)return;const i=(e.getUint8(10)&128)>>>7;return{value:i,description:i===1?"Yes":"No"}}function al(e){if(11>e.byteLength)return;const i=((e.getUint8(10)&112)>>>4)+1;return{value:i,description:`${i} ${i===1?"bit":"bits"}`}}function cl(e){if(11>e.byteLength)return;const i=(e.getUint8(10)&7)+1;return{value:i,description:`${i} ${i===1?"bit":"bits"}`}}const ll=[6,7,99],fl={get:dl};function dl(e,t,n){if(pl(t)){t.type="image/jpeg";const r=n+t.JPEGInterchangeFormat.value;t.image=e.buffer.slice(r,r+t.JPEGInterchangeFormatLength.value),Dr(t,"base64",function(){return Ur(this.image)})}return t}function pl(e){return e&&(e.Compression===void 0||ll.includes(e.Compression.value))&&e.JPEGInterchangeFormat&&e.JPEGInterchangeFormat.value&&e.JPEGInterchangeFormatLength&&e.JPEGInterchangeFormatLength.value}const gl={get:ml};function ml(e,t){const n={};let r=!1;const i=br(e,"FocalLength",t),s=br(e,"FocalLengthIn35mmFilm",t),o=hl(i,s);o&&(n.ScaleFactorTo35mmEquivalent=o,r=!0);const u=Sl(s);if(u&&(n.FieldOfView=u,r=!0),r)return n}function br(e,t,n){if(n&&e.exif&&e.exif[t])return e.exif[t].value;if(!n&&e[t])return e[t].value}function hl(e,t){if(e&&t)try{const n=t/(e[0]/e[1]);return{value:n,description:n.toFixed(1)}}catch{}}function Sl(e){if(e)try{const n=2*Math.atan(36/(2*e))*(180/Math.PI);return{value:n,description:n.toFixed(1)+" deg"}}catch{}}function Ni(e){this.name="MetadataMissingError",this.message=e||"No Exif data",this.stack=new Error().stack}Ni.prototype=new Error;const El={MetadataMissingError:Ni};function Il(e,t={}){return Tl(e)?(t.async=!0,xl(e,t).then(n=>Ue(n,t))):yl(e)?(t.async=!0,Nl(e).then(n=>Ue(n,t))):Ue(e,t)}function Tl(e){return typeof e=="string"}function xl(e,t){return/^\w+:\/\//.test(e)?typeof fetch<"u"?Fl(e,t):Al(e,t):Cl(e)?Promise.resolve(Gi(e)):bl(e,t)}function Fl(e,{length:t}={}){const n={method:"GET"};return Number.isInteger(t)&&t>=0&&(n.headers={range:`bytes=0-${t-1}`}),fetch(e,n).then(r=>r.arrayBuffer())}function Al(e,{length:t}={}){return new Promise((n,r)=>{const i={};Number.isInteger(t)&&t>=0&&(i.headers={range:`bytes=0-${t-1}`}),_l(e)(e,i,o=>{if(o.statusCode>=200&&o.statusCode<=299){const u=[];o.on("data",l=>u.push(Buffer.from(l))),o.on("error",l=>r(l)),o.on("end",()=>n(Buffer.concat(u)))}else r(`Could not fetch file: ${o.statusCode} ${o.statusMessage}`),o.resume()}).on("error",o=>r(o))})}function _l(e){return/^https:\/\//.test(e)?__non_webpack_require__("https").get:__non_webpack_require__("http").get}function Cl(e){return/^data:[^;,]*(;base64)?,/.test(e)}function bl(e,{length:t}={}){return new Promise((n,r)=>{const i=Pl();i.open(e,(s,o)=>{s?r(s):i.stat(e,(u,l)=>{if(u)r(u);else{const a=Math.min(l.size,t!==void 0?t:l.size),c=Buffer.alloc(a),f={buffer:c,length:a};i.read(o,f,g=>{g?r(g):i.close(o,m=>{m&&console.warn(`Could not close file ${e}:`,m),n(c)})})}})})})}function Pl(){try{return __non_webpack_require__("fs")}catch{return}}function yl(e){return typeof File<"u"&&e instanceof File}function Nl(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=i=>t(i.target.result),r.onerror=()=>n(r.error),r.readAsArrayBuffer(e)})}function Ue(e,t){return Rl(e)&&(e=new Uint8Array(e).buffer),vl(Ol(e),t)}function Rl(e){try{return Buffer.isBuffer(e)}catch{return!1}}function Ol(e){try{return new DataView(e)}catch{return new vr(e)}}function vl(e,{expanded:t=!1,async:n=!1,includeUnknown:r=!1,domParser:i=void 0}={expanded:!1,async:!1,includeUnknown:!1,domParser:void 0}){let s=!1,o={};const u=[],{fileType:l,fileDataOffset:a,jfifDataOffset:c,tiffHeaderOffset:f,iptcDataOffset:g,xmpChunks:m,iccChunks:x,mpfDataOffset:_,pngHeaderOffset:F,pngTextChunks:C,pngChunkOffsets:b,vp8xChunkOffset:N,gifHeaderOffset:w}=Rs.parseAppMarkers(e,n);if(Ll(a)){s=!0;const p=du.read(e,a);t?o.file=p:o=I({},o,p)}if(Dl(c)){s=!0;const p=Fu.read(e,c);t?o.jfif=p:o=I({},o,p)}if(Ul(f)){s=!0;const{tags:p,byteOrder:O}=oi.read(e,f,r);if(p.Thumbnail&&(o.Thumbnail=p.Thumbnail,delete p.Thumbnail),t?(o.exif=p,Ml(o)):o=I({},o,p),p["IPTC-NAA"]&&!Pr(g)){const T=Ye.read(p["IPTC-NAA"].value,0,r);t?o.iptc=T:o=I({},o,T)}if(p.ApplicationNotes&&!yr(m)){const T=hr.read(j(p.ApplicationNotes.value),void 0,i);t?o.xmp=T:(delete T._raw,o=I({},o,T))}if(p.ImageSourceData&&p.PhotoshopSettings){const T=wa.read(p.PhotoshopSettings.value,r);t?o.photoshop=T:o=I({},o,T)}if(p.ICC_Profile&&!Nr(x)){const T=Tr.read(p.ICC_Profile.value,[{offset:0,length:p.ICC_Profile.value.length,chunkNumber:1,chunksTotal:1}]);t?o.icc=T:o=I({},o,T)}if(p.MakerNote){if(Gl(p)){const T=fc.read(e,f,p.MakerNote.__offset,O,r);t?o.makerNotes=T:o=I({},o,T)}else if(Bl(p)){const T=mc.read(e,f,p.MakerNote.__offset,r);t?o.makerNotes=T:o=I({},o,T)}}p.MakerNote&&delete p.MakerNote.__offset}if(Pr(g)){s=!0;const p=Ye.read(e,g,r);t?o.iptc=p:o=I({},o,p)}if(yr(m)){s=!0;const p=hr.read(e,m,i);t?o.xmp=p:(delete p._raw,o=I({},o,p))}if(Nr(x)){s=!0;const p=Tr.read(e,x,n);p instanceof Promise?u.push(p.then(V)):V(p)}if(kl(_)){s=!0;const p=iu.read(e,_,r);t?o.mpf=p:o=I({},o,p)}if($l(F)){s=!0;const p=Fc.read(e,F);t?(o.png=o.png?I({},o.png,p):p,o.pngFile=p):o=I({},o,p)}if(Hl(C)){s=!0;const{readTags:p,readTagsPromise:O}=Oc.read(e,C,n,r);ee(p),O&&u.push(O.then(T=>T.forEach(ee)))}if(Zl(b)){s=!0;const p=Xc.read(e,b);t?o.png=o.png?I({},o.png,p):p:o=I({},o,p)}if(wl(N)){s=!0;const p=qc.read(e,N);t?o.riff=o.riff?I({},o.riff,p):p:o=I({},o,p)}if(Xl(w)){s=!0;const p=nl.read(e,w);t?o.gif=o.gif?I({},o.gif,p):p:o=I({},o,p)}const G=gl.get(o,t);G&&(t?o.composite=G:o=I({},o,G));const X=fl.get(e,o.Thumbnail,f);if(X?(s=!0,o.Thumbnail=X):delete o.Thumbnail,l&&(t?(o.file||(o.file={}),o.file.FileType=l):o.FileType=l,s=!0),!s)throw new El.MetadataMissingError;if(n)return Promise.all(u).then(()=>o);return o;function V(p){t?o.icc=p:o=I({},o,p)}function ee(p){if(t){for(const O of["exif","iptc"]){const T=`__${O}`;p[T]&&(o[O]=o[O]?I({},o.exif,p[T]):p[T],delete p[T])}o.png=o.png?I({},o.png,p):p,o.pngText=o.pngText?I({},o.png,p):p}else o=I({},o,p.__exif?p.__exif:{},p.__iptc?p.__iptc:{},p),delete o.__exif,delete o.__iptc}}function Ll(e){return e!==void 0}function Dl(e){return e!==void 0}function Ul(e){return e!==void 0}function Ml(e){if(e.exif){if(e.exif.GPSLatitude&&e.exif.GPSLatitudeRef)try{e.gps=e.gps||{},e.gps.Latitude=Te(e.exif.GPSLatitude.value),e.exif.GPSLatitudeRef.value.join("")==="S"&&(e.gps.Latitude=-e.gps.Latitude)}catch{}if(e.exif.GPSLongitude&&e.exif.GPSLongitudeRef)try{e.gps=e.gps||{},e.gps.Longitude=Te(e.exif.GPSLongitude.value),e.exif.GPSLongitudeRef.value.join("")==="W"&&(e.gps.Longitude=-e.gps.Longitude)}catch{}if(e.exif.GPSAltitude&&e.exif.GPSAltitudeRef)try{e.gps=e.gps||{},e.gps.Altitude=e.exif.GPSAltitude.value[0]/e.exif.GPSAltitude.value[1],e.exif.GPSAltitudeRef.value===1&&(e.gps.Altitude=-e.gps.Altitude)}catch{}}}function Pr(e){return e!==void 0}function yr(e){return Array.isArray(e)&&e.length>0}function Nr(e){return Array.isArray(e)&&e.length>0}function Gl(e){return e.Make&&e.Make.value&&Array.isArray(e.Make.value)&&e.Make.value[0]==="Canon"&&e.MakerNote&&e.MakerNote.__offset}function Bl(e){const t="PENTAX ";return e.MakerNote.value.length>t.length&&j(e.MakerNote.value.slice(0,t.length))===t&&e.MakerNote.__offset}function kl(e){return e!==void 0}function $l(e){return e!==void 0}function Hl(e){return e!==void 0}function Zl(e){return e!==void 0}function wl(e){return e!==void 0}function Xl(e){return e!==void 0}var pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ee={exports:{}},Yl=Ee.exports,Rr;function jl(){return Rr||(Rr=1,function(e,t){(function(n,r){r()})(Yl,function(){function n(a,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function r(a,c,f){var g=new XMLHttpRequest;g.open("GET",a),g.responseType="blob",g.onload=function(){l(g.response,c,f)},g.onerror=function(){console.error("could not download file")},g.send()}function i(a){var c=new XMLHttpRequest;c.open("HEAD",a,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function s(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof pe=="object"&&pe.global===pe?pe:void 0,u=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(a,c,f){var g=o.URL||o.webkitURL,m=document.createElement("a");c=c||a.name||"download",m.download=c,m.rel="noopener",typeof a=="string"?(m.href=a,m.origin===location.origin?s(m):i(m.href)?r(a,c,f):s(m,m.target="_blank")):(m.href=g.createObjectURL(a),setTimeout(function(){g.revokeObjectURL(m.href)},4e4),setTimeout(function(){s(m)},0))}:"msSaveOrOpenBlob"in navigator?function(a,c,f){if(c=c||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(n(a,f),c);else if(i(a))r(a,c,f);else{var g=document.createElement("a");g.href=a,g.target="_blank",setTimeout(function(){s(g)})}}:function(a,c,f,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof a=="string")return r(a,c,f);var m=a.type==="application/octet-stream",x=/constructor/i.test(o.HTMLElement)||o.safari,_=/CriOS\/[\d]+/.test(navigator.userAgent);if((_||m&&x||u)&&typeof FileReader<"u"){var F=new FileReader;F.onloadend=function(){var N=F.result;N=_?N:N.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=N:location=N,g=null},F.readAsDataURL(a)}else{var C=o.URL||o.webkitURL,b=C.createObjectURL(a);g?g.location=b:location.href=b,g=null,setTimeout(function(){C.revokeObjectURL(b)},4e4)}});o.saveAs=l.saveAs=l,e.exports=l})}(Ee)),Ee.exports}var zl=jl();const M=document.querySelector("#drop"),Kl=document.querySelector("#image-input"),Ri=document.querySelector(".disclaimer"),Je=document.querySelector(".result-container"),Wl=document.querySelector(".retry");let Or=document.querySelector("#header-image"),ql=document.querySelector(".meta"),Jl=document.querySelector(".settings");const Oi=document.querySelector(".download");document.querySelector(".download-link");const Qe=new FileReader;let Ve;["dragenter","dragover"].forEach(e=>{M.addEventListener(e,Vl,!1)});["dragleave","drop"].forEach(e=>{M.addEventListener(e,ef,!1)});["dragenter","dragover","dragleave","drop"].forEach(e=>{M.addEventListener(e,Ql,!1)});function Ql(e){e.preventDefault(),e.stopPropagation()}Kl.addEventListener("change",e=>{vi(e.target.files[0])});M.addEventListener("drop",e=>vi(e.dataTransfer.files[0]),!1);Wl.addEventListener("click",()=>{location.reload()},!1);Oi.addEventListener("click",tf,!1);function Vl(){M.classList.add("highlight")}function ef(){M.classList.remove("highlight")}async function vi(e){try{M.classList.add("loading"),Ve=e.name;const t=await Il(e,{expanded:!0});if(!t.xmp)throw new Error("XMP data is missing in EXIF");(new URLSearchParams(window.location.search)).get("download_enabled")==="yes"&(window.rawXMP=t.xmp._raw,window.xmp=t.xmp,console.log("(raw)XMP set"),Oi.classList.remove("hidden")),Qe.readAsDataURL(e),ql.innerHTML=Li({...t.xmp,...t.exif},Ve),Jl.innerHTML=Di({...t.xmp,...t.exif})}catch(t){Je.classList.remove("hidden"),M.classList.add("hidden"),Ri.classList.add("hidden"),Je.innerHTML=`<h3>Ouch, either no EXIF data to be found here or an issue.</h3>
		<br/>
    <p>Error Message:</p>
    <pre>${t}</pre>
		<br/>
		<a href="." class="button retry">Try another file ↻</a>`,console.error("There has been an issue reading necessary data. It is as follows: "),console.error(t)}}Qe.onload=()=>{M.classList.add("hidden"),Ri.classList.add("hidden"),Je.classList.remove("hidden"),Or.style.background=`linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,1)) top center, url(${Qe.result}) center`,Or.style.backgroundSize="cover, cover"};function tf(){let e=new Blob([window.rawXMP],{type:"application/rdf+xml"});zl.saveAs(e,`${Ve.replace(/\.\w*$/,"")}-light-detective.xmp`)}
